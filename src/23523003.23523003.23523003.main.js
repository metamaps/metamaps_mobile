/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

!function(){var t,e,i;!function(s){function o(t,e){return w.call(t,e)}function n(t,e){var i,s,o,n,r,a,c,u,h,p,l,d=e&&e.split("/"),f=v.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),r=t.length-1,v.nodeIdCompat&&T.test(t[r])&&(t[r]=t[r].replace(T,"")),t=d.concat(t),h=0;h<t.length;h+=1)if(l=t[h],"."===l)t.splice(h,1),h-=1;else if(".."===l){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||m)&&f){for(i=t.split("/"),h=i.length;h>0;h-=1){if(s=i.slice(0,h).join("/"),d)for(p=d.length;p>0;p-=1)if(o=f[d.slice(0,p).join("/")],o&&(o=o[s])){n=o,a=h;break}if(n)break;!c&&m&&m[s]&&(c=m[s],u=h)}!n&&c&&(n=c,a=u),n&&(i.splice(0,a,n),t=i.join("/"))}return t}function r(t,e){return function(){return d.apply(s,x.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return n(e,t)}}function c(t){return function(e){g[t]=e}}function u(t){if(o(y,t)){var e=y[t];delete y[t],_[t]=!0,l.apply(s,e)}if(!o(g,t)&&!o(_,t))throw new Error("No "+t);return g[t]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function p(t){return function(){return v&&v.config&&v.config[t]||{}}}var l,d,f,m,g={},y={},v={},_={},w=Object.prototype.hasOwnProperty,x=[].slice,T=/\.js$/;f=function(t,e){var i,s=h(t),o=s[0];return t=s[1],o&&(o=n(o,e),i=u(o)),o?t=i&&i.normalize?i.normalize(t,a(e)):n(t,e):(t=n(t,e),s=h(t),o=s[0],t=s[1],o&&(i=u(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},m={require:function(t){return r(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:p(t)}}},l=function(t,e,i,n){var a,h,p,l,d,v,w=[],x=typeof i;if(n=n||t,"undefined"===x||"function"===x){for(e=!e.length&&i.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(l=f(e[d],n),h=l.f,"require"===h)w[d]=m.require(t);else if("exports"===h)w[d]=m.exports(t),v=!0;else if("module"===h)a=w[d]=m.module(t);else if(o(g,h)||o(y,h)||o(_,h))w[d]=u(h);else{if(!l.p)throw new Error(t+" missing "+h);l.p.load(l.n,r(n,!0),c(h),{}),w[d]=g[h]}p=i?i.apply(g[t],w):void 0,t&&(a&&a.exports!==s&&a.exports!==g[t]?g[t]=a.exports:p===s&&v||(g[t]=p))}else t&&(g[t]=i)},t=e=d=function(t,e,i,o,n){if("string"==typeof t)return m[t]?m[t](e):u(f(t,e).f);if(!t.splice){if(v=t,v.deps&&d(v.deps,v.callback),!e)return;e.splice?(t=e,e=i,i=null):t=s}return e=e||function(){},"function"==typeof i&&(i=o,o=n),o?l(s,t,e,i):setTimeout(function(){l(s,t,e,i)},4),d},d.config=function(t){return d(t)},t._defined=g,i=function(t,e,i){e.splice||(i=e,e=[]),o(g,t)||o(y,t)||(y[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("almond",function(){}),i("famous/core/Entity",["require","exports","module"],function(t,e,i){function s(t){return a[t]}function o(t,e){a[t]=e}function n(t){var e=a.length;return o(e,t),e}function r(t){o(t,null)}var a=[];i.exports={register:n,unregister:r,get:s,set:o}}),i("famous/core/Transform",["require","exports","module"],function(t,e,i){function s(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function o(t){return Math.sqrt(s(t))}function n(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},r.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},r.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},r.moveThen=function(t,e){t[2]||(t[2]=0);var i=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],s=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],o=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return r.thenMove(e,[i,s,o])},r.translate=function(t,e,i){return void 0===i&&(i=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1]},r.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},r.scale=function(t,e,i){return void 0===i&&(i=1),[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1]},r.rotateX=function(t){var e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},r.rotateY=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},r.rotateZ=function(t){var e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,e,i){var s=Math.cos(t),o=Math.sin(t),n=Math.cos(e),r=Math.sin(e),a=Math.cos(i),c=Math.sin(i),u=[n*a,s*c+o*r*a,o*c-s*r*a,0,-n*c,s*a-o*r*c,o*a+s*r*c,0,r,-o*n,s*n,0,0,0,0,1];return u},r.rotateAxis=function(t,e){var i=Math.sin(e),s=Math.cos(e),o=1-s,n=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,c=t[1]*t[1]*o,u=t[1]*t[2]*o,h=t[2]*t[2]*o,p=t[0]*i,l=t[1]*i,d=t[2]*i,f=[n+s,r+d,a-l,0,r-d,c+s,u+p,0,a+l,u-p,h+s,0,0,0,0,1];return f},r.aboutOrigin=function(t,e){var i=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),s=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),o=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return r.thenMove(e,[i,s,o])},r.skew=function(t,e,i){return[1,0,0,0,Math.tan(i),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],i=t[4]*t[10]-t[6]*t[8],s=t[4]*t[9]-t[5]*t[8],o=t[1]*t[10]-t[2]*t[9],n=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],c=t[0]*t[6]-t[2]*t[4],u=t[0]*t[5]-t[1]*t[4],h=t[0]*e-t[1]*i+t[2]*s,p=1/h,l=[p*e,-p*o,p*a,0,-p*i,p*n,-p*c,0,p*s,-p*r,p*u,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var e=[t[0],t[1],t[2]],i=n(e[0]),a=o(e),c=[e[0]+i*a,e[1],e[2]],u=2/s(c);if(u>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-u*c[0]*c[0],h[5]=1-u*c[1]*c[1],h[10]=1-u*c[2]*c[2],h[1]=-u*c[0]*c[1],h[2]=-u*c[0]*c[2],h[6]=-u*c[1]*c[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var p=r.multiply(h,t),l=[p[5],p[6]],d=n(l[0]),f=o(l),m=[l[0]+d*f,l[1]],g=2/s(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var v=r.multiply(y,h),_=r.multiply(v,t),w=r.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=r.multiply(_,w),v=r.multiply(w,v);var x={};return x.translate=r.getTranslate(t),x.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],x.rotate[0]||(x.rotate[0]=0,x.rotate[2]=Math.atan2(v[4],v[5])),x.scale=[_[0],_[5],_[10]],x.skew=[Math.atan2(_[9],x.scale[2]),Math.atan2(_[8],x.scale[2]),Math.atan2(_[4],x.scale[0])],Math.abs(x.rotate[0])+Math.abs(x.rotate[2])>1.5*Math.PI&&(x.rotate[1]=Math.PI-x.rotate[1],x.rotate[1]>Math.PI&&(x.rotate[1]-=2*Math.PI),x.rotate[1]<-Math.PI&&(x.rotate[1]+=2*Math.PI),x.rotate[0]<0?x.rotate[0]+=Math.PI:x.rotate[0]-=Math.PI,x.rotate[2]<0?x.rotate[2]+=Math.PI:x.rotate[2]-=Math.PI),x},r.average=function(t,e,i){i=void 0===i?.5:i;for(var s=r.interpret(t),o=r.interpret(e),n={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)n.translate[a]=(1-i)*s.translate[a]+i*o.translate[a],n.rotate[a]=(1-i)*s.rotate[a]+i*o.rotate[a],n.scale[a]=(1-i)*s.scale[a]+i*o.scale[a],n.skew[a]=(1-i)*s.skew[a]+i*o.skew[a];return r.build(n)},r.build=function(t){var e=r.scale(t.scale[0],t.scale[1],t.scale[2]),i=r.skew(t.skew[0],t.skew[1],t.skew[2]),s=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(s,i),e),t.translate)},r.equals=function(t,e){return!r.notEquals(t,e)},r.notEquals=function(t,e){return t===e?!1:t&&e?!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]:!0},r.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],i.exports=r}),i("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,i){function s(){this.result={}}function o(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var n=t("./Transform");s._instance=new s,s.parse=function(t,e){return s._instance.parse(t,e)},s.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,n.identity),this.result},s.prototype.reset=function(){this.result={}};var r=[0,0];s.prototype._parseSpec=function(t,e,i){var s,a,c,u,h,p;if("number"==typeof t){if(s=t,c=e.transform,e.size&&e.origin&&(e.origin[0]||e.origin[1])){var l=[e.origin[0]*e.size[0],e.origin[1]*e.size[1],0];c=n.thenMove(c,o(l,i))}this.result[s]={transform:c,opacity:e.opacity,origin:e.origin||r,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,i);else{a=t.target,c=e.transform,u=e.opacity,h=e.origin,p=e.size;var f=i;if(void 0!==t.opacity&&(u=e.opacity*t.opacity),t.transform&&(c=n.multiply(e.transform,t.transform)),t.origin&&(h=t.origin,f=e.transform),t.size){var m=e.size;p=[void 0!==t.size[0]?t.size[0]:m[0],void 0!==t.size[1]?t.size[1]:m[1]],m&&h&&(h[0]||h[1])&&(c=n.thenMove(c,o([h[0]*m[0],h[1]*m[1],0],i)),c=n.moveThen([-h[0]*p[0],-h[1]*p[1],0],c)),f=e.transform,h=null}this._parseSpec(a,{transform:c,opacity:u,origin:h,size:p},f)}}},i.exports=s}),i("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,i){function s(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function o(t,e,i){for(var s=r.parse(t,e),a=Object.keys(s),c=0;c<a.length;c++){var u=a[c],h=n.get(u),p=s[u];p.allocator=e.allocator;var l=h.commit(p);l?o(l,e,i):i[u]=p}}var n=t("./Entity"),r=t("./SpecParser");s.prototype.add=function(t){var e=t instanceof s?t:new s(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},s.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},s.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof s?t:this},s.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},s.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),i=0;i<e.length;i++){var s=e[i];if(void 0===this._resultCache[s]){var r=n.get(s);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},o(this.render(),t,this._resultCache)},s.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,i=0;i<e.length;i++)t[i]=e[i].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},i.exports=s}),i("famous/core/EventEmitter",["require","exports","module"],function(t,e,i){function s(){this.listeners={},this._owner=this}s.prototype.emit=function(t,e){var i=this.listeners[t];if(i)for(var s=0;s<i.length;s++)i[s].call(this._owner,e);return this},s.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var i=this.listeners[t].indexOf(e);return 0>i&&this.listeners[t].push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(t,e){var i=this.listeners[t].indexOf(e);return i>=0&&this.listeners[t].splice(i,1),this},s.prototype.bindThis=function(t){this._owner=t},i.exports=s}),i("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,i){function s(){o.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var o=t("./EventEmitter");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},s.setOutputHandler=function(t,e){e instanceof s&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=e.on,t.removeListener=e.removeListener.bind(e)},s.prototype.emit=function(t,e){o.prototype.emit.apply(this,arguments);var i=0;for(i=0;i<this.downstream.length;i++)this.downstream[i].trigger&&this.downstream[i].trigger(t,e);for(i=0;i<this.downstreamFn.length;i++)this.downstreamFn[i](t,e);return this},s.prototype.trigger=s.prototype.emit,s.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return 0>i&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},s.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,i=e.indexOf(t);return i>=0?(e.splice(i,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},s.prototype.on=function(t,e){if(o.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var s=0;s<this.upstream.length;s++)this.upstream[s].on(t,i)}return this},s.prototype.addListener=s.prototype.on,s.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var i in this.upstreamListeners)t.on(i,this.upstreamListeners[i])}return this},s.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var i in this.upstreamListeners)t.removeListener(i,this.upstreamListeners[i])}return this},i.exports=s}),i("famous/core/ElementAllocator",["require","exports","module"],function(t,e,i){function s(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}s.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},s.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,i=this.detachedNodes[t];return i.length>0?e=i.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},s.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),i=this.detachedNodes[e];i.push(t),this.nodeCount--},s.prototype.getNodeCount=function(){return this.nodeCount},i.exports=s}),i("famous/utilities/Utility",["require","exports","module"],function(t,e,i){var s={};s.Direction={X:0,Y:1,Z:2},s.after=function(t,e){var i=t;return function(){i--,0===i&&e.apply(this,arguments)}},s.loadURL=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},i.open("GET",t),i.send()},s.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var i=document.createDocumentFragment();e.hasChildNodes();)i.appendChild(e.firstChild);return i},i.exports=s}),i("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,i){function s(t){this.method=t,this._instances=[],this.state=[]}var o=t("famous/utilities/Utility");s.SUPPORTS_MULTIPLE=!0,s.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},s.prototype.set=function(t,e,i){for(var s=o.after(t.length,i),n=0;n<t.length;n++)this._instances[n]||(this._instances[n]=new this.method),this._instances[n].set(t[n],e,s)},s.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},i.exports=s}),i("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function o(t,e,i){return(1-i)*t+i*e}function n(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,e){var i={curve:e.curve};return e.duration&&(i.duration=e.duration),e.speed&&(i.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(i.duration=t.duration),t.curve&&(i.curve=t.curve),t.speed&&(i.speed=t.speed)),"string"==typeof i.curve&&(i.curve=s.getCurve(i.curve)),i}function a(t,e,i,s,o){var n,r=1e-7,a=(i(o)-i(o-r))/r;if(t instanceof Array){n=[];for(var c=0;c<t.length;c++)n[c]=a*(t[c]-e[c])/s}else n=a*(t-e)/s;return n}function c(t,e,i){var s;if(t instanceof Array){s=[];for(var n=0;n<t.length;n++)s[n]=o(t[n],e[n],i)}else s=o(t,e,i);return s}s.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},s.SUPPORTS_MULTIPLE=!0,s.DEFAULT_OPTIONS={curve:s.Curves.linear,duration:500,speed:0};var u={};s.registerCurve=function(t,e){return u[t]?!1:(u[t]=e,!0)},s.unregisterCurve=function(t){return u[t]?(delete u[t],!0):!1},s.getCurve=function(t){return u[t]},s.getCurves=function(){return u},s.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},s.prototype.set=function(t,e,i){if(!e)return this.reset(t),void(i&&i());if(this._startValue=n(this.get()),e=r(e,this.options),e.speed){var s=this._startValue;if(s instanceof Object){var o=0;for(var a in s)o+=(t[a]-s[a])*(t[a]-s[a]);e.duration=Math.sqrt(o)/e.speed}else e.duration=Math.abs(t-s)/e.speed}this._startTime=Date.now(),this._endValue=n(t),this._startVelocity=n(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=i},s.prototype.reset=function(t,e){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=n(t),this.velocity=n(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},s.prototype.getVelocity=function(){return this.velocity},s.prototype.get=function(t){return this.update(t),this.state},s.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var i=e/this._duration;this.state=c(this._startValue,this._endValue,this._curve(i)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,i)}}}else if(this._callback){var s=this._callback;this._callback=void 0,s()}},s.prototype.isActive=function(){return this._active},s.prototype.halt=function(){this.reset(this.get())},s.registerCurve("linear",s.Curves.linear),s.registerCurve("easeIn",s.Curves.easeIn),s.registerCurve("easeOut",s.Curves.easeOut),s.registerCurve("easeInOut",s.Curves.easeInOut),s.registerCurve("easeOutBounce",s.Curves.easeOutBounce),s.registerCurve("spring",s.Curves.spring),s.customCurve=function(t,e){return t=t||0,e=e||0,function(i){return t*i+(-2*t-e+3)*i*i+(t+e-2)*i*i*i}},i.exports=s}),i("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,i){function s(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function o(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,i=this.currentAction[0],s=this.currentAction[1];s instanceof Object&&s.method?(e=s.method,"string"==typeof e&&(e=a[e])):e=r,this._currentMethod!==e&&(!(i instanceof Object)||e.SUPPORTS_MULTIPLE===!0||i.length<=e.SUPPORTS_MULTIPLE?this._engineInstance=new e:this._engineInstance=new n(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(s.velocity=this.velocity),this._engineInstance.set(i,s,o.bind(this))}var n=t("./MultipleTransition"),r=t("./TweenTransition"),a={};s.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},s.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},s.prototype.set=function(t,e,i){if(!e)return this.reset(t),i&&i(),this;var s=[t,e];return this.actionQueue.push(s),this.callbackQueue.push(i),this.currentAction||o.call(this),this},s.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},s.prototype.delay=function(t,e){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},e)},s.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},s.prototype.isActive=function(){return!!this.currentAction},s.prototype.halt=function(){this.set(this.get())},i.exports=s}),i("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,i){function s(t){return[t.clientWidth,t.clientHeight]}function o(t){this.container=t,this._allocator=new a(t),this._node=new n,this._eventOutput=new r,this._size=s(this.container),this._perspectiveState=new u(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:c.identity,opacity:1,origin:h,size:this._size},this._eventOutput.on("resize",function(){this.setSize(s(this.container))}.bind(this))}var n=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),c=t("./Transform"),u=t("famous/transitions/Transitionable"),h=[0,0];o.prototype.getAllocator=function(){return this._allocator},o.prototype.add=function(t){return this._node.add(t)},o.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},o.prototype.getSize=function(){return this._size},o.prototype.setSize=function(t){t||(t=s(this.container)),this._size[0]=t[0],this._size[1]=t[1]},o.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},o.prototype.getPerspective=function(){return this._perspectiveState.get()},o.prototype.setPerspective=function(t,e,i){return this._perspectiveState.set(t,e,i)},o.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},o.prototype.on=function(t,e){return this._eventOutput.on(t,e)},o.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},o.prototype.pipe=function(t){return this._eventOutput.pipe(t)},o.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.exports=o}),i("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,i){function s(t){this._value=t,this.eventOutput=null}function o(){this.eventOutput=new n,this.eventOutput.bindThis(this),n.setOutputHandler(this,this.eventOutput)}var n=t("./EventHandler");s.patch=function(t,e){for(var i=new s(t),o=1;o<arguments.length;o++)i.patch(arguments[o]);return t},s.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var i=arguments[e];for(var s in i)s in t&&i[s]&&i[s].constructor===Object&&t[s]&&t[s].constructor===Object?(t.hasOwnProperty(s)||(t[s]=Object.create(t[s])),this.key(s).patch(i[s]),this.eventOutput&&this.eventOutput.emit("change",{id:s,value:this.key(s).value()})):this.set(s,i[s])}return this},s.prototype.setOptions=s.prototype.patch,s.prototype.key=function(t){var e=new s(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},s.prototype.get=function(t){return this._value[t]},s.prototype.getOptions=s.prototype.get,s.prototype.set=function(t,e){var i=this.get(t);return this._value[t]=e,this.eventOutput&&e!==i&&this.eventOutput.emit("change",{id:t,value:e}),this},s.prototype.value=function(){return this._value},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.removeListener=function(){return o.call(this),this.removeListener.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},i.exports=s}),i("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,i){function s(){v.runLoop?(h.step(),requestAnimationFrame(s)):m=!1}function o(t){for(var e=0;e<p.length;e++)p[e].emit("resize");y.emit("resize")}var n,r,a=t("./Context"),c=t("./EventHandler"),u=t("./OptionsManager"),h={},p=[],l=[],d=[],f=Date.now(),m=!0,g={},y=new c,v={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new u(v),w=10;h.step=function(){var t=Date.now();if(!(r&&r>t-f)){var e=0;for(n=t-f,f=t,y.emit("prerender"),e=0;e<l.length;e++)l[e].call(this);for(l.splice(0);d.length&&Date.now()-t<w;)d.shift().call(this);for(e=0;e<p.length;e++)p[e].update();y.emit("postrender")}},requestAnimationFrame(s),window.addEventListener("resize",o,!1),o(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),h.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(h):y.pipe(t)},h.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(h):y.unpipe(t)},h.on=function(t,e){return t in g||(g[t]=y.emit.bind(y,t),document.body.addEventListener(t,g[t])),y.on(t,e)},h.emit=function(t,e){return y.emit(t,e)},h.removeListener=function(t,e){return y.removeListener(t,e)},h.getFPS=function(){return 1e3/n},h.setFPSCap=function(t){r=Math.floor(1e3/t)},h.getOptions=function(){return _.getOptions.apply(_,arguments)},h.setOptions=function(t){return _.setOptions.apply(_,arguments)},h.createContext=function(t){if(void 0===t)t=document.createElement(v.containerType),t.classList.add(v.containerClass),document.body.appendChild(t);else if(!(t instanceof Element))throw t=document.createElement(v.containerType),new Error("Tried to create context on non-existent element");var e=new a(t);return h.registerContext(e),e},h.registerContext=function(t){return p.push(t),t},h.nextTick=function(t){l.push(t)},h.defer=function(t){d.push(t)},_.on("change",function(t){"fpsCap"===t.id?h.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(s))}),i.exports=h}),i("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,i){function s(t){this._final=r.identity.slice(),this.translate=new n([0,0,0]),this.rotate=new n([0,0,0]),this.skew=new n([0,0,0]),this.scale=new n([1,1,1]),t&&this.set(t)}function o(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var n=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");s.prototype.setTranslate=function(t,e,i){return this.translate.set(t,e,i),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},s.prototype.setScale=function(t,e,i){return this.scale.set(t,e,i),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},s.prototype.setRotate=function(t,e,i){return this.rotate.set(t,e,i),this._final=o.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},s.prototype.setSkew=function(t,e,i){return this.skew.set(t,e,i),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},s.prototype.set=function(t,e,i){this._final=t;var s=r.interpret(t),o=i?a.after(4,i):null;return this.translate.set(s.translate,e,o),this.rotate.set(s.rotate,e,o),this.skew.set(s.skew,e,o),this.scale.set(s.scale,e,o),this},s.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},s.prototype.get=function(){return this.isActive()?o.call(this):this._final},s.prototype.getFinal=function(){return this._final},s.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},s.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},i.exports=s}),i("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function s(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:n.identity,opacity:1,origin:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.size&&this.sizeFrom(t.size))}function o(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var n=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");s.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,
this._output.transform=t),this},s.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},s.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},s.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},s.prototype.setTransform=function(t,e,i){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,i),this):this.transformFrom(t)},s.prototype.setOpacity=function(t,e,i){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,i)):this.opacityFrom(t)},s.prototype.setOrigin=function(t,e,i){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,i),this):this.originFrom(t)},s.prototype.setSize=function(t,e,i){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,i),this):this.sizeFrom(t)},s.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._sizeGetter=null},s.prototype.getTransform=function(){return this._transformGetter()},s.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},s.prototype.getOpacity=function(){return this._opacityGetter()},s.prototype.getOrigin=function(){return this._originGetter()},s.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},s.prototype.modify=function(t){return o.call(this),this._output.target=t,this._output},i.exports=s}),i("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,i){function s(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new d,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=null}function o(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function n(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function c(t){for(var e in this.properties)t.style[e]=""}function u(t){t[12]=Math.round(t[12]*g)/g,t[13]=Math.round(t[13]*g)/g;for(var e="matrix3d(",i=0;15>i;i++)e+=t[i]<1e-6&&t[i]>-1e-6?"0,":t[i]+",";return e+=t[15]+")"}function h(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}function p(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var l=t("./Entity"),d=t("./EventHandler"),f=t("./Transform"),m=void 0!==document.body.style.webkitTransform,g=window.devicePixelRatio||1;s.prototype.elementType="div",s.prototype.elementClass="famous-surface",s.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},s.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},s.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var i=this.eventHandler.emit(t,e);return i&&e&&e.stopPropagation&&e.stopPropagation(),i},s.prototype.pipe=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},s.prototype.render=function(){return this.id},s.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},s.prototype.getProperties=function(){return this.properties},s.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},s.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},s.prototype.setClasses=function(t){var e=0,i=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(e=0;e<i.length;e++)this.removeClass(i[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},s.prototype.getClassList=function(){return this.classList},s.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},s.prototype.getContent=function(){return this.content},s.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var y;y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=u(e)}:m?function(t,e){t.style.webkitTransform=u(e)}:function(t,e){t.style.transform=u(e)};var v=m?function(t,e){t.style.webkitTransformOrigin=h(e)}:function(t,e){t.style.transformOrigin=h(e)},_=m?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};s.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var i=0;i<this.elementClass.length;i++)e.classList.add(this.elementClass[i]);else e.classList.add(this.elementClass);e.style.display="",o.call(this,e),v(e,[0,0]),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},s.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,i=t.transform,s=t.opacity,o=t.origin,n=t.size;if(this.size){var c=n;n=[this.size[0],this.size[1]],void 0===n[0]&&c[0]&&(n[0]=c[0]),void 0===n[1]&&c[1]&&(n[1]=c[1])}if(p(this._size,n)&&(this._size=[n[0],n[1]],this._sizeDirty=!0),!i&&this._matrix)return this._matrix=null,this._opacity=0,void _(e);if(this._opacity!==s&&(this._opacity=s,e.style.opacity=s>=1?"0.999999":s),p(this._origin,o)||f.notEquals(this._matrix,i)){i||(i=f.identity),this._matrix=i;var u=i;o&&(this._origin||(this._origin=[0,0]),this._origin[0]=o[0],this._origin[1]=o[1],u=f.moveThen([-this._size[0]*o[0],-this._size[1]*o[1],0],i)),y(e,u)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){r.call(this,e);for(var h=this.getClassList(),l=0;l<h.length;l++)e.classList.add(h[l]);this._classesDirty=!1}this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(e.style.width=this._size[0]!==!0?this._size[0]+"px":"",e.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1)}},s.prototype.cleanup=function(t){var e=0,i=this._currTarget;this.eventHandler.emit("recall"),this.recall(i),i.style.display="none",i.style.width="",i.style.height="",this._size=null,c.call(this,i);var s=this.getClassList();for(r.call(this,i),e=0;e<s.length;e++)i.classList.remove(s[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)i.classList.remove(this.elementClass[e]);else i.classList.remove(this.elementClass);n.call(this,i),this._currTarget=null,t.deallocate(i),_(i)},s.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},s.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},s.prototype.getSize=function(t){return t?this._size:this.size||this._size},s.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},i.exports=s}),i("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,e,i){function s(t){this._node=new r,this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||s.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t)}var o=t("./EventHandler"),n=t("./OptionsManager"),r=t("./RenderNode");s.DEFAULT_OPTIONS={},s.prototype.getOptions=function(){return this._optionsManager.value()},s.prototype.setOptions=function(t){this._optionsManager.patch(t)},s.prototype.add=function(){return this._node.add.apply(this._node,arguments)},s.prototype._add=s.prototype.add,s.prototype.render=function(){return this._node.render()},s.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},i.exports=s}),i("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,e,i){function s(t){u.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=s.DefaultMap.transform,this.inOpacityMap=s.DefaultMap.opacity,this.inOriginMap=s.DefaultMap.origin,this.outTransformMap=s.DefaultMap.transform,this.outOpacityMap=s.DefaultMap.opacity,this.outOriginMap=s.DefaultMap.origin,this._output=[]}function o(t,e){return t(e.get())}var n=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),c=t("famous/transitions/Transitionable"),u=t("famous/core/View");s.prototype=Object.create(u.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},s.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},s.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},s.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},s.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},s.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw new Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},s.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw new Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},s.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw new Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},s.prototype.show=function(t,e,i){if(!t)return this.hide(i);if(e instanceof Function&&(i=e,e=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,i),this._nextRenderable=null})));this.hide(i)}var s=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,s=this._states[a],s.halt();var u=this._outgoingRenderables.indexOf(t);u>=0&&this._outgoingRenderables.splice(u,1)}else{s=new c(0);var h=new n({transform:this.inTransformMap?o.bind(this,this.inTransformMap,s):null,opacity:this.inOpacityMap?o.bind(this,this.inOpacityMap,s):null,origin:this.inOriginMap?o.bind(this,this.inOriginMap,s):null}),p=new r;p.add(h).add(t),this._showing=this._nodes.length,this._nodes.push(p),this._modifiers.push(h),this._states.push(s),this._renderables.push(t)}e||(e=this.options.inTransition),s.set(1,e,i)},s.prototype.hide=function(t,e){if(!(this._showing<0)){var i=this._showing;this._showing=-1,t instanceof Function&&(e=t,t=void 0);var s=this._nodes[i],n=this._modifiers[i],r=this._states[i],a=this._renderables[i];n.transformFrom(this.outTransformMap?o.bind(this,this.outTransformMap,r):null),n.opacityFrom(this.outOpacityMap?o.bind(this,this.outOpacityMap,r):null),n.originFrom(this.outOriginMap?o.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,i,s,o){if(this._outgoingRenderables.indexOf(o)>=0){var n=this._nodes.indexOf(t);this._nodes.splice(n,1),this._modifiers.splice(n,1),this._states.splice(n,1),this._renderables.splice(n,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(o),1),this._showing>=n&&this._showing--}e&&e.call(this)}.bind(this,s,n,r,a))}},s.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var e=0;e<this._nodes.length;e++)t[e]=this._nodes[e].render();return t},i.exports=s}),i("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,e,i){function s(t){o.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new n(this._container),this.setContent(this._container)}var o=t("famous/core/Surface"),n=t("famous/core/Context");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.elementType="div",s.prototype.elementClass="famous-surface",s.prototype.add=function(){return this.context.add.apply(this.context,arguments)},s.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),o.prototype.render.apply(this,arguments)},s.prototype.deploy=function(){return this._shouldRecalculateSize=!0,o.prototype.deploy.apply(this,arguments)},s.prototype.commit=function(t,e,i,s,n){var r=this._size?[this._size[0],this._size[1]]:null,a=o.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||r&&(this._size[0]!==r[0]||this._size[1]!==r[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),a},i.exports=s}),i("famous/transitions/CachedMap",["require","exports","module"],function(t,e,i){function s(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}s.create=function(t){var e=new s(t);return e.get.bind(e)},s.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},i.exports=s}),i("famous/views/EdgeSwapper",["require","exports","module","famous/transitions/CachedMap","famous/core/Entity","famous/core/EventHandler","famous/core/Transform","./RenderController"],function(t,e,i){function s(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new u(t),this._controller.inTransformFrom(n.create(o.bind(this,1e-4))),this._controller.outTransformFrom(n.create(o.bind(this,-1e-4))),this._eventInput=new a,a.setInputHandler(this,this._eventInput),this._entityId=r.register(this),t&&this.setOptions(t)}function o(t,e){return c.translate(this._size[0]*(1-e),0,t*(1-e))}var n=t("famous/transitions/CachedMap"),r=t("famous/core/Entity"),a=t("famous/core/EventHandler"),c=t("famous/core/Transform"),u=t("./RenderController");s.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},s.prototype.setOptions=function(t){this._controller.setOptions(t)},s.prototype.render=function(){return this._entityId},s.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},i.exports=s}),i("views/MenuBarView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View"],function(t,e,i){function s(t){u.apply(this,arguments),o.call(this),n.call(this)}function o(){this.canConfirm=!1,this.menuSurf=new r({size:[void 0,56],properties:{backgroundColor:"#009688",boxShadow:"rgba(0, 0, 0, 0.3) 0px 1px 5px"}}),this.menuMod=new a({}),this.xIconSurf=new r({size:[25,25],content:'<img width="25" src="content/images/50_x_button.png"/>'}),this.xIconMod=new a({origin:[0,.5],opacity:0}),this.backIconSurf=new r({size:[25,25],content:'<img width="25" src="content/images/50_back_button.png"/>'}),this.backIconMod=new a({origin:[0,.5],opacity:0}),this.titleSurf=new r({size:[void 0,28],content:this.options.title,properties:{fontFamily:"robotomedium",fontSize:"20px",color:"#FFF",textAlign:"left"}});var t=new a({size:[void 0,28],origin:[0,.5],transform:c.translate(72,0,0)});this.checkmarkIconSurf=new r({size:[25,25],content:'<img width="25" src="content/images/checkmark.png"/>'}),this.checkmarkIconMod=new a({origin:[1,.5],opacity:0}),this._add(this.menuMod).add(this.menuSurf),this._add(this.xIconMod).add(new a({transform:c.translate(16,0,0)})).add(this.xIconSurf),this._add(this.backIconMod).add(new a({transform:c.translate(16,0,0)})).add(this.backIconSurf),this._add(t).add(this.titleSurf),this._add(this.checkmarkIconMod).add(new a({transform:c.translate(-16,0,0)})).add(this.checkmarkIconSurf)}function n(){this.xIconSurf.on("click",function(){this.cancelation()}.bind(this)),this.backIconSurf.on("click",function(){this._eventOutput.emit("goBack")}.bind(this)),this.checkmarkIconSurf.on("click",function(){this.confirmation()}.bind(this))}var r=t("famous/core/Surface"),a=t("famous/core/Modifier"),c=t("famous/core/Transform"),u=t("famous/core/View");s.prototype=Object.create(u.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={duration:200,title:"Maps"},s.prototype.enableCreate=function(){this.canConfirm||this.showCheckIcon(),this.canConfirm=!0},s.prototype.disableCreate=function(){this.canConfirm&&this.hideCheckIcon(),this.canConfirm=!1},s.prototype.showXIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.backIconMod.setTransform(c.translate(0,0,0)),this.backIconMod.setOpacity(0),this.xIconMod.setTransform(c.translate(0,0,1)),this.xIconMod.setOpacity(1,t),this.menuMod.setOpacity(.9)},s.prototype.hideXIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.xIconMod.setOpacity(0,t),this.menuMod.setOpacity(1)},s.prototype.showBackIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.xIconMod.setTransform(c.translate(0,0,0)),this.xIconMod.setOpacity(0),this.backIconMod.setTransform(c.translate(0,0,1)),this.backIconMod.setOpacity(1,t)},s.prototype.hideBackIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.backIconMod.setOpacity(0,t)},s.prototype.showCheckIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.checkmarkIconMod.setOpacity(1,t)},s.prototype.hideCheckIcon=function(){var t={duration:this.options.duration,curve:"easeInOut"};this.checkmarkIconMod.setOpacity(0,t)},s.prototype.cancelation=function(){this.hideXIcon(),this.hideCheckIcon(),this.showBackIcon(),this._eventOutput.emit("cancelation")},s.prototype.confirmation=function(){this.canConfirm?(this.hideXIcon(),this.hideCheckIcon(),this.showBackIcon(),this._eventOutput.emit("confirmation")):console.log("unable to take this action yet")},i.exports=s}),i("famous/core/ViewSequence",["require","exports","module"],function(t,e,i){function s(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}s.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},s.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},s.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},s.Backing.prototype.reindex=function(t,e,i){var s=0,o=this.firstIndex,n=i-e,r=this.firstNode;if(t===this.firstIndex){for(s=0;e>s;s++)this.firstNode=this.firstNode.getNext();this.firstNode.index=this.firstIndex}for(;t-1>o;)r=r.getNext(),o++;var a=r;for(s=0;e>s;s++)r=r.getNext(),r&&(r._previousNode=a);var c=r?r.getNext():null;for(a._nextNode=null,r=a,s=0;i>s;s++)r=r.getNext();if(o+=i,r!==c&&(r._nextNode=c,c&&(c._previousNode=r)),c)for(r=c,o++;r&&o<this.array.length+this.firstIndex;)r._nextNode?r.index+=n:r.index=o,r=r.getNext(),o++},s.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},s.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},s.prototype.getIndex=function(){return this.index},s.prototype.toString=function(){return""+this.index},s.prototype.unshift=function(t){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},s.prototype.push=function(t){this._.array.push.apply(this._.array,arguments)},s.prototype.splice=function(t,e){var i=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(i)),this._.reindex(t,e,i.length)},s.prototype.swap=function(t){var e=t.get(),i=this.get();this._.setValue(this.index,e),this._.setValue(t.index,i);var s=this._previousNode,o=this._nextNode,n=this.index,r=t._previousNode,a=t._nextNode,c=t.index;this.index=c,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=n,t._previousNode=s===t?this:s,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=o===t?this:o,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},s.prototype.get=function(){return this._.getValue(this.index)},s.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},s.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},i.exports=s}),i("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),this.optionsManager=new p(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0}function o(t,e,i){i||(i=t[1]/this.options.cellSize[1]|0),e||(e=t[0]/this.options.cellSize[0]|0);for(var s=t[1]/i,o=t[0]/e,a=0;i>a;a++)for(var c=Math.round(s*a),u=0;e>u;u++){var h=Math.round(o*u),p=a*e+u;p in this._modifiers||n.call(this,p),r.call(this,p,[Math.round(o*(u+1))-h,Math.round(s*(a+1))-c],[h,c,0],1)}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=i*e,a=this._activeCount;a<this._modifiers.length;a++)r.call(this,a,[Math.round(o),Math.round(s)],[0,0],0)}function n(t){var e={transform:new d(c.identity),opacity:new l(0),size:new l([0,0])},i=new h({transform:e.transform,opacity:e.opacity,size:e.size});this._states[t]=e,this._modifiers[t]=i}function r(t,e,i,s){var o=this._states[t],n=o.size,r=o.opacity,a=o.transform,c=this.options.transition;a.halt(),r.halt(),n.halt(),a.setTranslate(i,c),n.set(e,c),r.set(s,c)}var a=t("famous/core/Entity"),c=(t("famous/core/RenderNode"),t("famous/core/Transform")),u=t("famous/core/ViewSequence"),h=t("famous/core/Modifier"),p=t("famous/core/OptionsManager"),l=t("famous/transitions/Transitionable"),d=t("famous/transitions/TransitionableTransform");s.DEFAULT_OPTIONS={dimensions:[1,1],cellSize:[250,250],transition:!1},s.prototype.render=function(){return this.id},s.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},s.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new u(t)),this.sequence=t},s.prototype.commit=function(t){var e=t.transform,i=t.opacity,s=t.origin,n=t.size,r=this.options.dimensions[0],a=this.options.dimensions[1];(n[0]!==this._contextSizeCache[0]||n[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&o.call(this,n,r,a);for(var u=this.sequence,h=[],p=0;u&&p<this._modifiers.length;){var l=u.get(),d=this._modifiers[p];p>=this._activeCount&&this._states[p].opacity.isActive()&&(this._modifiers.splice(p,1),this._states.splice(p,1)),l&&(h[p]=d.modify({origin:s,target:l.render()})),u=u.getNext(),p++}return n&&(e=c.moveThen([-n[0]*s[0],-n[1]*s[1],0],e)),{transform:e,opacity:i,size:n,target:h}},i.exports=s}),i("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,e,i){function s(t){return h.on(p,t),t}function o(t,e){var i=l(),o=function(){var s=l();s-i>=e&&(t.apply(this,arguments),h.removeListener(p,o))};return s(o)}function n(t,e){var i=l(),o=function(){var s=l();s-i>=e&&(t.apply(this,arguments),i=l())};return s(o)}function r(t,e){if(void 0!==e){var i=function(){e--,0>=e&&(t.apply(this,arguments),c(i))};return s(i)}}function a(t,e){e=e||1;var i=e,o=function(){e--,0>=e&&(t.apply(this,arguments),e=i)};return s(o)}function c(t){h.removeListener(p,t)}function u(t,e){var i,s,n,r,a;return function(){s=this,a=arguments,n=l();var c=function(){var u=l-n;e>u?i=o(c,e-u):(i=null,r=t.apply(s,a))};return i||(i=o(c,e)),r}}var h=t("famous/core/Engine"),p="prerender",l=window.performance?function(){return window.performance.now()}:function(){return Date.now()};i.exports={setTimeout:o,setInterval:n,debounce:u,after:r,every:a,clear:c}}),i("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function s(t){this._imageUrl=void 0,o.apply(this,arguments)}var o=t("famous/core/Surface");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.elementType="img",s.prototype.elementClass="famous-surface",s.prototype.setContent=function(t){this._imageUrl=t,this._contentDirty=!0},s.prototype.deploy=function(t){t.src=this._imageUrl||""},s.prototype.recall=function(t){t.src=""},i.exports=s}),i("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function s(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",o.apply(this,arguments),this.on("click",this.focus.bind(this))}var o=t("famous/core/Surface");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.elementType="input",s.prototype.elementClass="famous-surface",s.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},s.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},s.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},s.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},s.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},s.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},s.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},s.prototype.getName=function(){return this._name},s.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},i.exports=s}),i("famous/surfaces/TextareaSurface",["require","exports","module","famous/core/Surface"],function(t,e,i){function s(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",o.apply(this,arguments),this.on("click",this.focus.bind(this))}var o=t("famous/core/Surface");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.elementType="textarea",s.prototype.elementClass="famous-surface",s.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},s.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},s.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},s.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},s.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},s.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},s.prototype.getName=function(){return this._name},s.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},s.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},s.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},s.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},i.exports=s}),i("surfaces/MediaInputSurface",["require","exports","module","famous/surfaces/InputSurface"],function(t,e,i){"use strict";function s(t){this._accept=t.accept||"",this._capture=t.capture||"",o.apply(this,arguments)}var o=t("famous/surfaces/InputSurface");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.deploy=function(t){o.prototype.deploy.call(this,t),t.accept=this._accept,t.capture=this._capture},i.exports=s}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof i&&i.amd)i("recorder/Recorder",[],t);else{
var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Recorder=t()}}(function(){return function t(i,s,o){function n(a,c){if(!s[a]){if(!i[a]){var u="function"==typeof e&&e;if(!c&&u)return u(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var p=s[a]={exports:{}};i[a][0].call(p.exports,function(t){var e=i[a][1][t];return n(e?e:t)},p,p.exports,t,i,s,o)}return s[a].exports}for(var r="function"==typeof e&&e,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(t,e,i){"use strict";e.exports=t("./recorder").Recorder},{"./recorder":2}],2:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();Object.defineProperty(i,"__esModule",{value:!0}),i.Recorder=void 0;var r=t("inline-worker"),a=s(r),c=i.Recorder=function(){function t(e,i){var s=this;o(this,t),this.config={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},Object.assign(this.config,i),this.context=e.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(t){if(s.recording){for(var e=[],i=0;i<s.config.numChannels;i++)e.push(t.inputBuffer.getChannelData(i));s.worker.postMessage({command:"record",buffer:e})}},e.connect(this.node),this.node.connect(this.context.destination);var n={};this.worker=new a["default"](function(){function t(t){f=t.sampleRate,m=t.numChannels,r()}function e(t){for(var e=0;m>e;e++)d[e].push(t[e]);l+=t[0].length}function i(t){for(var e=[],i=0;m>i;i++)e.push(a(d[i],l));var s=void 0;s=2===m?c(e[0],e[1]):e[0];var o=p(s),r=new Blob([o],{type:t});n.postMessage({command:"exportWAV",data:r})}function s(){for(var t=[],e=0;m>e;e++)t.push(a(d[e],l));n.postMessage({command:"getBuffer",data:t})}function o(){l=0,d=[],r()}function r(){for(var t=0;m>t;t++)d[t]=[]}function a(t,e){for(var i=new Float32Array(e),s=0,o=0;o<t.length;o++)i.set(t[o],s),s+=t[o].length;return i}function c(t,e){for(var i=t.length+e.length,s=new Float32Array(i),o=0,n=0;i>o;)s[o++]=t[n],s[o++]=e[n],n++;return s}function u(t,e,i){for(var s=0;s<i.length;s++,e+=2){var o=Math.max(-1,Math.min(1,i[s]));t.setInt16(e,0>o?32768*o:32767*o,!0)}}function h(t,e,i){for(var s=0;s<i.length;s++)t.setUint8(e+s,i.charCodeAt(s))}function p(t){var e=new ArrayBuffer(44+2*t.length),i=new DataView(e);return h(i,0,"RIFF"),i.setUint32(4,36+2*t.length,!0),h(i,8,"WAVE"),h(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,m,!0),i.setUint32(24,f,!0),i.setUint32(28,4*f,!0),i.setUint16(32,2*m,!0),i.setUint16(34,16,!0),h(i,36,"data"),i.setUint32(40,2*t.length,!0),u(i,44,t),i}var l=0,d=[],f=void 0,m=void 0;n.onmessage=function(n){switch(n.data.command){case"init":t(n.data.config);break;case"record":e(n.data.buffer);break;case"exportWAV":i(n.data.type);break;case"getBuffer":s();break;case"clear":o()}}},n),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(t){var e=s.callbacks[t.data.command].pop();"function"==typeof e&&e(t.data.data)}}return n(t,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(t){if(t=t||this.config.callback,!t)throw new Error("Callback not set");this.callbacks.getBuffer.push(t),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(t,e){if(e=e||this.config.mimeType,t=t||this.config.callback,!t)throw new Error("Callback not set");this.callbacks.exportWAV.push(t),this.worker.postMessage({command:"exportWAV",type:e})}}],[{key:"forceDownload",value:function(t,e){var i=(window.URL||window.webkitURL).createObjectURL(t),s=window.document.createElement("a");s.href=i,s.download=e||"output.wav";var o=document.createEvent("Event");o.initEvent("click",!0,!0),s.dispatchEvent(o)}}]),t}();i["default"]=c},{"inline-worker":3}],3:[function(t,e,i){"use strict";e.exports=t("./inline-worker")},{"./inline-worker":4}],4:[function(t,e,i){(function(t){"use strict";var i=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=!!(t===t.window&&t.URL&&t.Blob&&t.Worker),n=function(){function e(i,n){var r=this;if(s(this,e),o){var a=i.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],c=t.URL.createObjectURL(new t.Blob([a],{type:"text/javascript"}));return new t.Worker(c)}this.self=n,this.self.postMessage=function(t){setTimeout(function(){r.onmessage({data:t})},0)},setTimeout(function(){i.call(n)},0)}return i(e,{postMessage:{value:function(t){var e=this;setTimeout(function(){e.self.onmessage({data:t})},0)}}}),e}();e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),i("audio/AudioRecorder",["require","exports","module","recorder/Recorder"],function(t,e,i){t("recorder/Recorder");var s=null,o=null,n=null,r=null,a=Recorder,c=null,u=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,s=new AudioContext,r=s.createGain(),a=new Recorder(r,{workerPath:"/lib/recorder/recorderWorker.js"})},h=function(t,e){a.exportWAV(e)},p=function(){navigator.getUserMedia&&navigator.getUserMedia({audio:!0},d,function(t){alert("Error getting audio"),console.log(t)}),null===s&&u(),a.clear(),a.record()},l=function(t){c.stop(),a.stop(),a.getBuffer(function(e){h(e,t)})},d=function(t){c=t,n=s.createMediaStreamSource(t),o=n,o.connect(r);var e=s.createAnalyser();e.fftSize=2048,r.connect(e);var i=s.createGain();i.gain.value=0,r.connect(i),i.connect(s.destination)};i.exports={start:p,stop:l}}),i("views/CreateView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/GridLayout","famous/utilities/Timer","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/surfaces/TextareaSurface","surfaces/MediaInputSurface","audio/AudioRecorder"],function(t,e,i){function s(t){d.apply(this,arguments),this.app=t,n.call(this),r.call(this),c.call(this),a.call(this),this.app.metacodes.fetch({success:function(t,e,i){o(this,t)}.bind(this)})}function o(t,e){u.call(t),t.reset()}function n(){var t=new p({transform:l.translate(0,0,-4)});this.filterSurf=new h({properties:{marginTop:"44px",backgroundColor:"#FFF"}}),this._add(t).add(this.filterSurf)}function r(){var t=this;this.inputValue="",this.inputSurf=new g({name:"inputSurface",placeholder:"Name it!",value:"",type:"text",properties:{color:"#333333",fontSize:"18px",fontFamily:"Arial",textAlign:"center",border:"none",outline:"none",borderBottom:"1px solid rgba(0,0,0,0.2)",resize:"none"}}),this.inputSurf.on("keyup",function(){t.inputValue=this.getValue(),""!==this.getValue()?t._eventOutput.emit("canCreateTopic"):t._eventOutput.emit("cantCreateTopic")}),this.inputMod=new p({origin:[.5,0]}),this.inputMod.sizeFrom(function(){return[window.innerWidth-32,80]}),this._add(this.inputMod).add(this.inputSurf)}function a(){var t=new d;this.imageCapMod=new p({origin:[.5,0]}),this.imageCapMod.sizeFrom(function(){return[window.innerWidth-32,150]}),this.emptyImageText='<img class="addIcon" src="content/images/photo.png" width="40" height= "40" /><br><span class="addText">Tap to add photo...</span>',this.emptyImageProperties={border:"1px solid rgba(0,0,0,0.2)",borderRadius:"3px",textAlign:"center",paddingTop:"40px",overflow:"hidden"},this.imagePreview=new h({properties:this.emptyImageProperties,content:this.emptyImageText});var e=new p({opacity:0});this.imageInput=new y({type:"file",accept:"image/*",capture:"camera"}),this.imageInput.on("change",this.previewFile.bind(this)),t._add(this.imagePreview),t._add(e).add(this.imageInput),this._add(this.imageCapMod).add(t)}function c(){this.recordMod=new p({origin:[.5,0]}),this.recordMod.sizeFrom(function(){return[window.innerWidth-32,100]}),this.emptyRecorderText='<img class="addIcon" src="content/images/audio.png" width="40" height= "40" /><br><span class="addText">Hold to record...</span>',this.recordingText='<img class="addIcon" src="content/images/audio.png" width="40" height= "40" /><br><span class="addText">Recording...</span>',this.doneRecordingText='<img class="addIcon" src="content/images/audio.png" width="40" height= "40" /><br><span class="addText">You captured a recording!</span>',this.recordSurface=new h({properties:{border:"1px solid rgba(0,0,0,0.2)",borderRadius:"3px",textAlign:"center",paddingTop:"18px"},content:this.emptyRecorderText}),this.recordSurface.on("touchstart",function(t){Date.now();this.recordSurface.setContent(this.recordingText),this.recordingMessage=setInterval(function(){},1e3),this.recordSurface.setProperties({backgroundColor:"#81D381"}),v.start()}.bind(this)),this.recordSurface.on("touchend",function(t){this.recordSurface.setContent(this.doneRecordingText),this.recordSurface.setProperties({backgroundColor:""}),clearInterval(this.recordingMessage),v.stop(function(t){console.log(t),this.audioFile=t,this.audioFile.name=Date.now()+".wav"}.bind(this))}.bind(this)),this._add(this.recordMod).add(this.recordSurface)}function u(){var t=this;this.selectedMetacode=null;var e,i=t.app.metacodes.models;i=_.sortBy(i,function(t){return t.get("name").toLowerCase()});var s=new f({size:[void 0,void 0],dimensions:[i.length,1]}),o=[];s.sequenceFrom(o),this.rowIconModifiers=[],this.rowTextModifiers=[];var n,r,a,c,u=(window.innerWidth,window.innerHeight,136),g=(i.length-1)%2*(u/2),y=i.length%2==1?Math.floor(i.length/2):Math.floor(i.length/2)-.5;y*=u;for(var v=0;v<i.length;v++){var w=new p({size:[u,u],origin:[.5,.5],transform:l.translate(0,0,-2)});this.rowIconModifiers[v]=new p({size:[Math.round(.4*u),Math.round(.4*u)],opacity:.5,origin:[.5,.75],transform:l.translate(0,0,-1)}),this.rowTextModifiers[v]=new p({size:[!0,30],opacity:0,origin:[0,0],transform:l.translate(0,10,-1)}),e=i[v],n=new h,n.index=v,n.typeText=e.get("name"),n.suggestText="Type here...";var x,T,S,M,O,b,I,C;n.on("touchstart",function(t){S=this.xAxis,M=t.targetTouches[0].clientX,O=t.targetTouches[0].clientX,T=this.selectedMetacodeIndex,x=void 0}.bind(this)),n.on("touchmove",function(t){b=t.targetTouches[0].clientX-O,this.xAxis+=b,this.metacodesMod.setTransform(l.translate(this.xAxis,164,0)),I=Math.abs(t.targetTouches[0].clientX-M)%u,x=t.targetTouches[0].clientX-M>0?this.selectedMetacodeIndex-1:this.selectedMetacodeIndex+1,I=Math.abs(t.targetTouches[0].clientX-M)>=u?u:I,x=t.targetTouches[0].clientX===M?void 0:x,x=i[x]?x:void 0,console.log(this.selectedMetacodeIndex),console.log(x),C=u-I;var e,s,o=C/u*.2+.4,n=C/u*.5+.5,r=C/u,a=I/u*.2+.4,c=I/u*.5+.5,h=I/u;this.rowIconModifiers[this.selectedMetacodeIndex].setSize([Math.round(u*o),Math.round(u*o)]),this.rowIconModifiers[this.selectedMetacodeIndex].setOpacity(n),this.rowTextModifiers[this.selectedMetacodeIndex].setOpacity(r),void 0!==x&&(this.rowIconModifiers[x].setSize([Math.round(u*a),Math.round(u*a)]),this.rowIconModifiers[x].setOpacity(c),this.rowTextModifiers[x].setOpacity(h)),O>=M&&t.targetTouches[0].clientX<=M?(this.selectedMetacodeIndex=T,this.selectedMetacode=i[this.selectedMetacodeIndex].get("name"),console.log("switched back to original")):M>=O&&t.targetTouches[0].clientX>=M?(this.selectedMetacodeIndex=T,this.selectedMetacode=i[this.selectedMetacodeIndex].get("name"),console.log("switched back to original")):I===u&&void 0!==x&&(T=x,this.selectedMetacodeIndex=x,this.selectedMetacode=i[this.selectedMetacodeIndex].get("name"),M=t.targetTouches[0].clientX,e=Math.abs(this.xAxis)%u,sign=e>=u/2?-1:1,s=e>=u/2?-1*e+u:-1*e,this.xAxis<0?S=this.xAxis-s-sign*g:this.xAxis>=0&&(S=this.xAxis+s+sign*g),console.log("switched to "+i[this.selectedMetacodeIndex].get("name"))),O=t.targetTouches[0].clientX}.bind(this)),n.on("touchend",function(t){var e=Math.abs(this.xAxis)%u,s=e>=u/2?-1:1,o=e>=u/2?-1*e+u:-1*e;this.xAxis<0?(this.xAxis=this.xAxis-o-s*g,Math.abs(this.xAxis)>y&&(this.xAxis=-1*y)):this.xAxis>=0&&(this.xAxis=this.xAxis+o+s*g,Math.abs(this.xAxis)>y&&(this.xAxis=y)),this.metacodesMod.setTransform(l.translate(this.xAxis,164,0),{duration:300,curve:"easeInOut"}),console.log(this.xAxis),console.log(S),this.xAxis===S?(this.rowIconModifiers[this.selectedMetacodeIndex].setSize([Math.round(.6*u),Math.round(.6*u)],{duration:300,curve:"linear"}),this.rowIconModifiers[this.selectedMetacodeIndex].setOpacity(1,{duration:300,curve:"linear"}),this.rowTextModifiers[this.selectedMetacodeIndex].setOpacity(1,{duration:300,curve:"linear"}),void 0!==x&&(this.rowIconModifiers[x].setSize([Math.round(.4*u),Math.round(.4*u)],{duration:300,curve:"linear"}),this.rowIconModifiers[x].setOpacity(.5,{duration:300,curve:"linear"}),this.rowTextModifiers[x].setOpacity(0,{duration:300,curve:"linear"})),console.log(this.selectedMetacode)):this.xAxis!==S&&void 0!==x&&(this.rowIconModifiers[this.selectedMetacodeIndex].setSize([Math.round(.4*u),Math.round(.4*u)],{duration:300,curve:"linear"}),this.rowIconModifiers[this.selectedMetacodeIndex].setOpacity(.5,{duration:300,curve:"linear"}),this.rowTextModifiers[this.selectedMetacodeIndex].setOpacity(0,{duration:300,curve:"linear"}),this.rowIconModifiers[x].setSize([Math.round(.6*u),Math.round(.6*u)],{duration:300,curve:"linear"}),this.rowIconModifiers[x].setOpacity(1,{duration:300,curve:"linear"}),this.rowTextModifiers[x].setOpacity(1,{duration:300,curve:"linear"}),this.selectedMetacodeIndex=x,this.selectedMetacode=i[this.selectedMetacodeIndex].get("name"),console.log(this.selectedMetacode))}.bind(this));var z=-1!==e.get("icon").indexOf("http://")||-1!==e.get("icon").indexOf("https://")?e.get("icon"):"content/images"+e.get("icon");r=new m({content:z}),a=new h({size:[136,void 0],content:e.get("name").toUpperCase(),properties:{color:"#7A7A7A",textAlign:"center",fontSize:"18px",fontWeight:"bold",whiteSpace:"nowrap"}}),c=new d;var E=c._add(w);E.add(this.rowIconModifiers[v]).add(r),E.add(this.rowTextModifiers[v]).add(a),E.add(new p({transform:l.translate(0,0,0)})).add(n),o.push(c)}var P=Math.floor((i.length-1)/2),F=_.find(i,function(t){return"Wildcard"===t.get("name")});this.indexOfWildcard=_.indexOf(i,F),this.selectedMetacodeIndex=this.indexOfWildcard,this.selectedMetacode="Wildcard",this.rowIconModifiers[this.indexOfWildcard].setSize([Math.round(.6*u),Math.round(.6*u)]),this.rowIconModifiers[this.indexOfWildcard].setOpacity(1),this.rowTextModifiers[this.indexOfWildcard].setOpacity(1),this.initialXaxis=(P-this.indexOfWildcard)*u+g,this.xAxis=(P-this.indexOfWildcard)*u+g,this.metacodesMod=new p({size:[u*i.length,136],origin:[.5,0],transform:l.translate(this.xAxis,0,0)}),this._add(this.metacodesMod).add(s)}var h=t("famous/core/Surface"),p=t("famous/core/Modifier"),l=t("famous/core/Transform"),d=t("famous/core/View"),f=t("famous/views/GridLayout"),m=(t("famous/utilities/Timer"),t("famous/surfaces/ImageSurface")),g=(t("famous/surfaces/InputSurface"),t("famous/surfaces/TextareaSurface")),y=t("surfaces/MediaInputSurface"),v=t("audio/AudioRecorder");s.prototype=Object.create(d.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={duration:300},s.prototype.animate=function(){this.reset(),this.inputMod.setTransform(l.translate(0,74,0),{duration:this.options.duration-100,curve:"easeInOut"}),this.metacodesMod.setTransform(l.translate(this.initialXaxis,164,0),{duration:this.options.duration-100,curve:"easeInOut"}),this.imageCapMod.setTransform(l.translate(0,310,0),{duration:this.options.duration-100,curve:"easeInOut"}),this.recordMod.setTransform(l.translate(0,470,0),{duration:this.options.duration-100,curve:"easeInOut"}),this.inputSurf.focus()},s.prototype.reset=function(){this.inputMod.setTransform(l.translate(0,0,0)),this.inputSurf.setValue(""),this.inputValue="",this.inputSurf.setPlaceholder("Name it!"),this.metacodesMod.setTransform(l.translate(this.initialXaxis,0,0)),this.xAxis=this.initialXaxis,this.rowIconModifiers[this.selectedMetacodeIndex].setSize([Math.round(136*.4),Math.round(136*.4)]),this.rowIconModifiers[this.selectedMetacodeIndex].setOpacity(.5),this.rowTextModifiers[this.selectedMetacodeIndex].setOpacity(0),this.selectedMetacodeIndex=this.indexOfWildcard,this.selectedMetacode="Wildcard",this.rowIconModifiers[this.indexOfWildcard].setSize([Math.round(81.6),Math.round(81.6)]),this.rowIconModifiers[this.indexOfWildcard].setOpacity(1),this.rowTextModifiers[this.indexOfWildcard].setOpacity(1),this.imageCapMod.setTransform(l.translate(0,0,0)),this.imagePreview.setContent(this.emptyImageText),this.imagePreview.setProperties(this.emptyImageProperties),this.recordMod.setTransform(l.translate(0,0,0)),this.recordSurface.setContent(this.emptyRecorderText),this._eventOutput.emit("cantCreateTopic")},s.prototype.selectMetacode=function(t,e,i){this.inputSurf.setPlaceholder(i),""!==this.inputValue?(this._eventOutput.emit("canCreateTopic"),this.inputSurf.setValue(this.inputValue)):this.inputSurf.setValue(""),this.selectedMetacode=e,this.rowModifiers[t].setOpacity(1,{duration:200,easing:"easeInOut"});for(var s=0;s<this.rowModifiers.length;s++)s!==t&&this.rowModifiers[s].setOpacity(.4,{duration:200,easing:"easeInOut"})},s.prototype.previewFile=function(t){var e=t.origin._currTarget.files[0],i=new FileReader;0==e.type.indexOf("image")&&(i.onload=function(t){this.imagePreview.setProperties({paddingTop:"0px"}),this.imagePreview.setContent('<img src="'+t.target.result+'" width="'+(window.innerWidth-32)+'" />')}.bind(this),i.readAsDataURL(e))},s.prototype.uploadFile=function(t,e,i){var s=new XMLHttpRequest;s.upload&&(s.onreadystatechange=function(t){if(4==s.readyState){200==s.status?"success":"failure"}},s.open("POST","/upload",!0),s.setRequestHeader("X-File-Name",t.name),s.setRequestHeader("Topic-Id",e),s.setRequestHeader("Image-Or-Audio",i),s.send(t))},i.exports=s}),i("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._timestamp=17,this._minTimeStep=1e3/120,this._maxTimestep=17,this._prevTime=w(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function o(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function n(t,e,i){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),this._agents[this._currAgentId]={agent:t,targets:e,source:i},o.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var e=r.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function c(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function u(t,e){var i=this._agents[this._constraints[t]];return i.agent.applyConstraint(i.targets,i.source,e)}function h(t){for(var e=0;e<this.options.constraintSteps;){for(var i=this._constraints.length-1;i>-1;i--)u.call(this,i,t);e++}}function p(t,e){t.integrateVelocity(e)}function l(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity()}function d(t,e){t.integrateOrientation(e)}function f(t,e){t.integratePosition(e),t.emit("update",t)}function m(t){c.call(this,t),this.forEach(p,t),this.forEachBody(l,t),h.call(this,t),this.forEachBody(d,t),this.forEach(f,t)}function g(){var t=0,e=0;return this.forEach(function(i){e=i.getEnergy(),t+=e,e<i.sleepTolerance&&i.sleep()}),t}function y(){for(var t=0,e=this._forces.length-1;e>-1;e--)t+=this._forces[e].getEnergy()||0;return t}function v(){for(var t=0,e=this._constraints.length-1;e>-1;e--)t+=this._constraints[e].getEnergy()||0;return t}var _=t("famous/core/EventHandler");s.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var w=function(){return Date.now}();s.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},s.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},s.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,i=e.indexOf(t);if(i>-1){for(var s=0;s<Object.keys(this._agents);s++)this.detachFrom(s,t);e.splice(i,1)}0===this.getBodies().length&&(this._hasBodies=!1)},s.prototype.attach=function(t,e,i){if(t instanceof Array){for(var s=[],o=0;o<t.length;o++)s[o]=n.call(this,t[o],e,i);return s}return n.call(this,t,e,i)},s.prototype.attachTo=function(t,e){r.call(this,t).targets.push(e)},s.prototype.detach=function(t){var e=this.getAgent(t),i=o.call(this,e),s=i.indexOf(t);i.splice(s,1),delete this._agents[t]},s.prototype.detachFrom=function(t,e){var i=r.call(this,t);if(i.source===e)this.detach(t);else{var s=i.targets,o=s.indexOf(e);o>-1&&s.splice(o,1)}},s.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},s.prototype.getAgent=function(t){return r.call(this,t).agent},s.prototype.getParticles=function(){return this._particles},s.prototype.getBodies=function(){return this._bodies},s.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},s.prototype.forEachParticle=function(t,e){for(var i=this.getParticles(),s=0,o=i.length;o>s;s++)t.call(this,i[s],e)},s.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var i=this.getBodies(),s=0,o=i.length;o>s;s++)t.call(this,i[s],e)},s.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},s.prototype.getEnergy=function(){return g.call(this)+y.call(this)+v.call(this)},s.prototype.step=function(){var t=w(),e=t-this._prevTime;this._prevTime=t,e<this._minTimeStep||(e>this._maxTimeStep&&(e=this._maxTimestep),m.call(this,this._timestamp))},s.prototype.isSleeping=function(){return this._isSleeping},s.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},s.prototype.wake=function(){this._prevTime=w(),this.emit("start",this),this._isSleeping=!1},s.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},s.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new _),this._eventHandler.on(t,e)},i.exports=s}),i("famous/math/Vector",["require","exports","module"],function(t,e,i){function s(t,e,i){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=e||0,this.z=i||0),this}function o(t,e,i){return this.x=t,this.y=e,this.z=i,this}function n(t){return o.call(this,t[0],t[1],t[2]||0)}function r(t){return o.call(this,t.x,t.y,t.z)}function a(t){return o.call(this,t,0,0)}var c=new s(0,0,0);s.prototype.add=function(t){return o.call(c,this.x+t.x,this.y+t.y,this.z+t.z)},s.prototype.sub=function(t){return o.call(c,this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t){return o.call(c,t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t){return this.mult(1/t)},s.prototype.cross=function(t){var e=this.x,i=this.y,s=this.z,n=t.x,r=t.y,a=t.z;return o.call(c,s*r-i*a,e*a-s*n,i*n-e*r)},s.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},s.prototype.rotateX=function(t){var e=this.x,i=this.y,s=this.z,n=Math.cos(t),r=Math.sin(t);return o.call(c,e,i*n-s*r,i*r+s*n)},s.prototype.rotateY=function(t){var e=this.x,i=this.y,s=this.z,n=Math.cos(t),r=Math.sin(t);return o.call(c,s*r+e*n,i,s*n-e*r)},s.prototype.rotateZ=function(t){var e=this.x,i=this.y,s=this.z,n=Math.cos(t),r=Math.sin(t);return o.call(c,e*n-i*r,e*r+i*n,s)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?r.call(c,this.mult(t/e)):o.call(c,t,0,0)},s.prototype.clone=function(){return new s(this)},s.prototype.isZero=function(){return!(this.x||this.y||this.z)},s.prototype.set=function(t){return t instanceof Array?n.call(this,t):t instanceof s?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},s.prototype.setXYZ=function(t,e,i){return o.apply(this,arguments)},s.prototype.set1D=function(t){return a.call(this,t)},s.prototype.put=function(t){r.call(t,c)},s.prototype.clear=function(){return o.call(this,0,0,0)},s.prototype.cap=function u(u){if(u===1/0)return r.call(c,this);var t=this.norm();return t>u?r.call(c,this.mult(u/t)):r.call(c,this)},s.prototype.project=function(t){return t.mult(this.dot(t))},s.prototype.reflectAcross=function(t){return t.normalize().put(t),r(c,this.sub(this.project(t).mult(2)))},s.prototype.get=function(){return[this.x,this.y,this.z]},s.prototype.get1D=function(){return this.x},i.exports=s}),i("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var o=t("famous/core/OptionsManager");s.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},s.prototype.setOptions=function(t){this._optionsManager.patch(t)},s.prototype.getOptions=function(){return this._optionsManager.value()},s.prototype.integrateVelocity=function(t,e){var i=t.velocity,s=t.inverseMass,o=t.force;o.isZero()||(i.add(o.mult(e*s)).put(i),o.clear())},s.prototype.integratePosition=function(t,e){var i=t.position,s=t.velocity;this.options.velocityCap&&s.cap(this.options.velocityCap).put(s),i.add(s.mult(e)).put(i)},s.prototype.integrateAngularMomentum=function(t,e){var i=t.angularMomentum,s=t.torque;s.isZero()||(this.options.angularVelocityCap&&s.cap(this.options.angularVelocityCap).put(s),i.add(s.mult(e)).put(i),s.clear())},s.prototype.integrateOrientation=function(t,e){var i=t.orientation,s=t.angularVelocity;s.isZero()||i.add(i.multiply(s).scalarMultiply(.5*e)).put(i)},i.exports=s}),i("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,e,i){function s(t){t=t||{},this.position=new n,this.velocity=new n,this.force=new n;var e=s.DEFAULT_OPTIONS;this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:e.mass,this.axis=void 0!==t.axis?t.axis:e.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function o(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var n=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),c=t("../integrators/SymplecticEuler");s.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},s.SLEEP_TOLERANCE=1e-7,s.AXES={X:0,Y:1,Z:2},s.INTEGRATOR=new c;var u={start:"start",update:"update",end:"end"},h=function(){return Date.now}();s.prototype.sleep=function(){this._isSleeping||(this.emit(u.end,this),this._isSleeping=!0)},s.prototype.wake=function(){this._isSleeping&&(this.emit(u.start,this),this._isSleeping=!1,this._prevTime=h())},s.prototype.isBody=!1,s.prototype.setPosition=function(t){this.position.set(t)},s.prototype.setPosition1D=function(t){this.position.x=t},s.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},s.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},s.prototype.positionFrom=function(t){this._positionGetter=t},s.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},s.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},s.prototype.getVelocity=function(){return this.velocity.get()},s.prototype.getVelocity1D=function(){return this.velocity.x},s.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},s.prototype.getMass=function(){return this.mass},s.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},s.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},s.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},s.prototype.integrateVelocity=function(t){s.INTEGRATOR.integrateVelocity(this,t)},s.prototype.integratePosition=function(t){s.INTEGRATOR.integratePosition(this,t)},s.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},s.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},s.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.axis,i=this.transform;return void 0!==e&&(e&~s.AXES.X&&(t.x=0),e&~s.AXES.Y&&(t.y=0),e&~s.AXES.Z&&(t.z=0)),i[12]=t.x,i[13]=t.y,i[14]=t.z,i},s.prototype.modify=function(t){var e=this._spec;return e.transform=this.getTransform(),e.target=t,e},s.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.removeListener=function(){return o.call(this),this.removeListener.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},i.exports=s}),i("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,e,i){function s(t){this.force=new n(t),this._energy=0,this._eventOutput=null}function o(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var n=t("famous/math/Vector"),r=t("famous/core/EventHandler");s.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},s.prototype.applyForce=function(t){t.applyForce(this.force)},s.prototype.getEnergy=function(){return this._energy},s.prototype.setEnergy=function(t){this._energy=t},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.addListener=function(){return o.call(this),this.addListener.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},s.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},i.exports=s}),i("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,i){function s(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),o.call(this)}var o=t("./Force");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},s.DEFAULT_OPTIONS={strength:.01,forceFunction:s.FORCE_FUNCTIONS.LINEAR},s.prototype.applyForce=function(t){for(var e=this.options.strength,i=this.options.forceFunction,s=this.force,o=0;o<t.length;o++){var n=t[o];i(n.velocity).mult(-e).put(s),n.applyForce(s)}},s.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},i.exports=s}),i("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,e,i){function s(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new h(0,0,0),c.call(this),u.call(this);
}function o(t){this.forceFunction=t}function n(){var t=this.options;t.stiffness=Math.pow(2*p/t.period,2)}function r(){var t=this.options;t.damping=4*p*t.dampingRatio/t.period}function a(t,e){return.5*t*e*e}function c(){o.call(this,this.options.forceFunction),n.call(this),r.call(this)}var u=t("./Force"),h=t("famous/math/Vector");s.prototype=Object.create(u.prototype),s.prototype.constructor=s;var p=Math.PI;s.FORCE_FUNCTIONS={FENE:function(t,e){var i=.99*e,s=Math.max(Math.min(t,i),-i);return s/(1-s*s/(e*e))},HOOK:function(t){return t}},s.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:s.FORCE_FUNCTIONS.HOOK},s.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof h&&(this.options.anchor=t.anchor.position),t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),c.call(this)},s.prototype.applyForce=function(t,e){for(var i=this.force,s=this.disp,o=this.options,n=o.stiffness,r=o.damping,c=o.length,u=o.maxLength,h=o.anchor||e.position,p=0;p<t.length;p++){var l=t[p],d=l.position,f=l.velocity;h.sub(d).put(s);var m=s.norm()-c;if(0===m)return;var g=l.mass;n*=g,r*=g,s.normalize(n*this.forceFunction(m,u)).put(i),r&&(e?i.add(f.sub(e.velocity).mult(-r)).put(i):i.add(f.mult(-r)).put(i)),l.applyForce(i),e&&e.applyForce(i.mult(-1)),this.setEnergy(a(n,m))}},s.prototype.getEnergy=function(t){var e=this.options,i=e.length,s=e.anchor,o=e.stiffness,n=s.sub(t.position).norm()-i;return.5*o*n*n},s.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new h),this.options.anchor.set(t)},i.exports=s}),i("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function s(t,e,i,s){var o={};for(var n in t)o[n]=t[n];return{touch:o,origin:e,timestamp:Date.now(),count:s,history:i}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=s(i,t.origin,void 0,t.touches.length);this.eventOutput.emit("trackstart",o),this.selective||this.touchHistory[i.identifier]||this.track(o)}}function n(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=this.touchHistory[i.identifier];if(o){var n=s(i,t.origin,o,t.touches.length);this.touchHistory[i.identifier].push(n),this.eventOutput.emit("trackmove",n)}}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=this.touchHistory[i.identifier];if(o){var n=s(i,t.origin,o,t.touches.length);this.eventOutput.emit("trackend",n),delete this.touchHistory[i.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function c(t){this.selective=t,this.touchHistory={},this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",o.bind(this)),this.eventInput.on("touchmove",n.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var u=t("famous/core/EventHandler");c.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},i.exports=c}),i("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,i){function s(t,e){2===arguments.length?(this._legacyPositionGetter=arguments[0],e=arguments[1]):(this._legacyPositionGetter=null,e=arguments[0]),this.output=new u,this.touchTracker=new c,this.options={direction:void 0,rails:!1,scale:1},this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},e?this.setOptions(e):this.setOptions(this.options),u.setOutputHandler(this,this.output),u.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",n.bind(this)),this.touchTracker.on("trackmove",r.bind(this)),this.touchTracker.on("trackend",a.bind(this))}function o(){var t=this._payload;t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.count=void 0,t.touch=void 0}function n(t){o.call(this);var e=this._payload;e.count=t.count,e.touch=t.identifier,this.output.emit("start",e)}function r(t){var e=t.history,i=e[e.length-2].timestamp,o=e[e.length-1].timestamp,n=e[e.length-2].touch,r=e[e.length-1].touch,a=r.pageX-n.pageX,c=r.pageY-n.pageY;this.options.rails&&(Math.abs(a)>Math.abs(c)?c=0:a=0);var u,h,p,l,d=Math.max(o-i,8),f=a/d,m=c/d,g=this.options.scale;this.options.direction===s.DIRECTION_X?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,l=g*a,h=u+l,p=g*f):this.options.direction===s.DIRECTION_Y?(u=this._legacyPositionGetter?this._legacyPositionGetter():0,l=g*c,h=u+l,p=g*m):(u=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],l=[g*a,g*c],h=[u[0]+l[0],u[1]+l[1]],p=[g*f,g*m]);var y=this._payload;y.delta=l,y.position=h,y.velocity=p,y.clientX=t.touch.clientX,y.clientY=t.touch.clientY,y.count=t.count,y.touch=t.touch.identifier,this.output.emit("update",y)}function a(t){var e=void 0!==this.options.direction?0:[0,0],i=t.history,o=t.count;if(i.length>1){var n=i[i.length-2].timestamp,r=i[i.length-1].timestamp,a=i[i.length-2].touch,c=i[i.length-1].touch,u=c.pageX-a.pageX,h=c.pageY-a.pageY;this.options.rails&&(Math.abs(u)>Math.abs(h)?h=0:u=0);var p=Math.max(r-n,1),l=u/p,d=h/p,f=this.options.scale;e=this.options.direction===s.DIRECTION_X?f*l:this.options.direction===s.DIRECTION_Y?f*d:[f*l,f*d]}var m=this._payload;m.velocity=e,m.clientX=t.clientX,m.clientY=t.clientY,m.count=o,m.touch=t.touch.identifier,this.output.emit("end",m)}var c=t("./TouchTracker"),u=t("famous/core/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},s.prototype.getOptions=function(){return this.options},i.exports=s}),i("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,e,i){function s(t,e){2===arguments.length?(this._legacyPositionGetter=arguments[0],e=arguments[1]):(this._legacyPositionGetter=null,e=arguments[0]),this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},e?this.setOptions(e):this.setOptions(this.options),this._payload={delta:null,position:null,velocity:null,slip:!0},this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousewheel",n.bind(this)),this.input.on("wheel",n.bind(this)),this.inProgress=!1,this._loopBound=!1}function o(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var e=void 0===this.options.direction?this._legacyPositionGetter?this._legacyPositionGetter:[0,0]:this._legacyPositionGetter?this._legacyPositionGetter:0;this.inProgress=!1;var i=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(i=this._prevVel);var s=this._payload;s.position=e,s.velocity=i,s.slip=!0,this.output.emit("end",s)}}function n(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0}),this._loopBound||(a.on("prerender",o.bind(this)),this._loopBound=!0));var e=this._prevTime||Date.now(),i=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,n=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(i*=this.options.lineHeight,n*=this.options.lineHeight);var r=Date.now();this.options.rails&&(Math.abs(i)>Math.abs(n)?n=0:i=0);var c,u,h,p,l=Math.max(r-e,8),d=i/l,f=n/l,m=this.options.scale;this.options.direction===s.DIRECTION_X?(c=this._legacyPositionGetter?this._legacyPositionGetter():0,p=m*i,u=c+p,h=m*d):this.options.direction===s.DIRECTION_Y?(c=this._legacyPositionGetter?this._legacyPositionGetter():0,p=m*n,u=c+p,h=m*f):(c=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],p=[m*i,m*n],u=[c[0]+p[0],c[1]+p[1]],h=[m*d,m*f]);var g=this._payload;g.delta=p,g.position=u,g.velocity=h,g.slip=!0,this.output.emit("update",g),this._prevTime=r,this._prevVel=h}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},i.exports=s}),i("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler","./TouchSync","./ScrollSync"],function(t,e,i){function s(t,e){2===arguments.length?this._legacyPositionGetter=t:(this._legacyPositionGetter=null,e=t),this.eventInput=new n,this.eventOutput=new n,n.setInputHandler(this,this.eventInput),n.setOutputHandler(this,this.eventOutput),this._handlers=void 0,e?(this.options=e,e.syncClasses||(this.options.syncClasses=c),this.setOptions(e)):this.options={syncClasses:c},this._handlers&&o.call(this)}function o(){var t=null,e=0;if(this._handlers)for(e=0;e<this._handlers.length;e++)this.eventInput.unpipe(this._handlers[e]),this._handlers[e].unpipe(this.eventOutput);for(this._handlers=[],e=0;e<this.options.syncClasses.length;e++)t=this.options.syncClasses[e],this._handlers[e]=new t(this._legacyPositionGetter,this._handlerOptions),this.eventInput.pipe(this._handlers[e]),this._handlers[e].pipe(this.eventOutput)}var n=t("famous/core/EventHandler"),r=t("./TouchSync"),a=t("./ScrollSync"),c=[r,a];s.register=function(t){c.indexOf(t)<0&&c.push(t)},s.DIRECTION_X=0,s.DIRECTION_Y=1,s.DIRECTION_Z=2,s.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,o.call(this)),this._handlers)for(var e=0;e<this._handlers.length;e++)this._handlers[e].setOptions(this._handlerOptions)},i.exports=s}),i("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,i){function s(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new o(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var o=t("./Context"),n=t("./Transform"),r=t("./Surface");s.SIZE_ZERO=[0,0],s.prototype=Object.create(r.prototype),s.prototype.elementType="div",s.prototype.elementClass="famous-group",s.prototype.add=function(){return this.context.add.apply(this.context,arguments)},s.prototype.render=function(){return r.prototype.render.call(this)},s.prototype.deploy=function(t){this.context.migrate(t)},s.prototype.recall=function(t){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},s.prototype.commit=function(t){var e=t.transform,i=t.origin,o=t.opacity,a=t.size,c=r.prototype.commit.call(this,{allocator:t.allocator,transform:n.thenMove(e,[-i[0]*a[0],-i[1]*a[1],0]),opacity:o,origin:i,size:s.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:n.translate(-i[0]*a[0],-i[1]*a[1],0),origin:i,size:a}),c},i.exports=s}),i("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,e,i){function s(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new h,this.group.add({render:c.bind(this)}),this._entityId=u.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function o(t){t||(t=this._contextSize);var e=this.options.direction===d.Direction.X?0:1;return void 0===t[e]?this._contextSize[e]:t[e]}function n(t,e,i){var s=t.getSize?t.getSize():this._contextSize,n=this._outputFunction(e);return i.push({transform:n,target:t.render()}),o.call(this,s)}function r(){return this.options.clipSize?this.options.clipSize:o.call(this,this._contextSize)}function a(){for(var t=o.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;e&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=e,t=o.call(this,this._node.getSize()),e=this._node&&this._node.getNext?this._node.getNext():null;for(var i=this._node&&this._node.getPrevious?this._node.getPrevious():null;i&&this._position+this._positionOffset<0;){var s=o.call(this,i.getSize());this._positionOffset+=s,this._node=i,i=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function c(){var t=null,e=this._position,i=[];this._onEdge=0;for(var s=-this._positionOffset,c=r.call(this),u=this._node;u&&s-e<c+this.options.margin;)s+=n.call(this,u,s,i),u=u.getNext?u.getNext():null;var h=this._node,p=o.call(this,h.getSize());if(c>s){for(;h&&c>p;)h=h.getPrevious(),h&&(p+=o.call(this,h.getSize()));for(h=this._node;h&&c>p;)h=h.getNext(),h&&(p+=o.call(this,h.getSize()))}var l=void 0!==p&&c>p?p:c;for(!u&&l>=s-e?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:s-l})):!this._node.getPrevious()&&0>=e&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),u=this._node&&this._node.getPrevious?this._node.getPrevious():null,s=-this._positionOffset,u&&(t=u.getSize?u.getSize():this._contextSize,s-=o.call(this,t));u&&s-e>-(r.call(this)+this.options.margin);)n.call(this,u,s,i),u=u.getPrevious?u.getPrevious():null,u&&(t=u.getSize?u.getSize():this._contextSize,s-=o.call(this,t));return a.call(this),i}var u=t("famous/core/Entity"),h=t("famous/core/Group"),p=t("famous/core/OptionsManager"),l=t("famous/core/Transform"),d=t("famous/utilities/Utility"),f=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");s.DEFAULT_OPTIONS={direction:d.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1},s.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},s.prototype.onEdge=function(){return this._onEdge},s.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===d.Direction.X?l.translate(t,0):l.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return l.inverse(t(-e))}},s.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},s.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},s.prototype.getSize=function(t){return t?this._contextSize:this._size},s.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},s.prototype.commit=function(t){var e=t.transform,i=t.opacity,s=t.origin,o=t.size;this.options.clipSize||o[0]===this._contextSize[0]&&o[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize=o,this.options.direction===d.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var n=this._masterOutputFunction(-this._position);return{transform:l.multiply(e,n),opacity:i,origin:s,target:this.group.render()}},i.exports=s}),i("famous/views/Scrollview",["require","exports","module","famous/utilities/Utility","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/inputs/GenericSync","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._node=null,this._physicsEngine=new y,this._particle=new v,this._physicsEngine.addBody(this._particle),this.spring=new w({anchor:[0,0,0]}),this.drag=new _({forceFunction:_.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new _({forceFunction:_.FORCE_FUNCTIONS.LINEAR}),this.sync=new x({direction:this.options.direction}),this._eventInput=new T,this._eventOutput=new T,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),T.setInputHandler(this,this._eventInput),T.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new O,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(t),a.call(this)}function o(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function n(t){var e=-t.velocity,i=-t.delta;this._onEdge&&t.slip&&(0>e&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&o.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(this.getPosition()+i))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){u.call(this),this._onEdge&&d.call(this,this._edgeSpringPosition,I.EDGE),c.call(this);var e=-t.velocity,i=this.options.speedLimit;t.slip&&(i*=this.options.edgeGrip),-i>e?e=-i:e>i&&(e=i),this.setVelocity(e),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",o),this._eventInput.on("update",n),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function c(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function u(){this._springState=I.NONE,this._physicsEngine.detachAll()}function h(t){var e=this.options.direction,i=(t.getSize()||this._scroller.getSize())[e];return i||(i=this._scroller.getSize()[e]),i}function p(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===I.EDGE||d.call(this,this._edgeSpringPosition,I.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(u.call(this),c.call(this))),this._onEdge=t}function l(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==I.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),i=Math.abs(t)>this.options.pageSwitchSpeed,s=h.call(this,this._node),o=e>.5*s,n=t>0;o&&!i||i&&n?this.goToNextPage():d.call(this,0,I.PAGE),this._needsPaginationCheck=!1}}}function d(t,e){var i;e===I.EDGE?(this._edgeSpringPosition=t,i={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===I.PAGE&&(this._pageSpringPosition=t,i={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(i),e&&!this._springState&&(u.call(this),this._springState=e,c.call(this)),this._springState=e}function f(){for(var t=this.getPosition(),e=h.call(this,this._node),i=this._node.getNext();t>e+b&&i;)m.call(this,-e),t-=e,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),e=h.call(this,this._node);for(var s,o=this._node.getPrevious();-b>t&&o;)s=h.call(this,o),this._scroller.sequenceFrom(o),this._node=o,m.call(this,s),t+=s,o=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===I.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===I.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/utilities/Utility"),y=t("famous/physics/PhysicsEngine"),v=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Drag"),w=t("famous/physics/forces/Spring"),x=t("famous/inputs/GenericSync"),T=t("famous/core/EventHandler"),S=t("famous/core/OptionsManager"),M=t("famous/core/ViewSequence"),O=t("famous/views/Scroller"),b=.5;s.DEFAULT_OPTIONS={direction:g.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1};var I={NONE:0,EDGE:1,PAGE:2};s.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},s.prototype.getPosition=function(){return this._particle.getPosition1D()},s.prototype.setPosition=function(t){this._particle.setPosition1D(t)},s.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},s.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},s.prototype.setOptions=function(t){t&&(void 0!==t.direction&&("x"===t.direction?t.direction=g.Direction.X:"y"===t.direction&&(t.direction=g.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===g.Direction.X?x.DIRECTION_X:x.DIRECTION_Y})},s.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var e=this.getPosition(),i=h.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var s=b>e?-i:0;d.call(this,s,I.PAGE),m.call(this,i)}return this._eventOutput.emit("pageChange",{direction:-1}),t},s.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var e=this.getPosition(),i=h.call(this,this._node),s=h.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var o=e>i-b?i+s:i;d.call(this,o,I.PAGE),m.call(this,-i)}return this._eventOutput.emit("pageChange",{direction:1}),t},s.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new M({array:t})),this._node=t,this._scroller.sequenceFrom(t)},s.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},s.prototype.render=function(){return this._node?(f.call(this),p.call(this,this._scroller.onEdge()),this.options.paginated&&l.call(this),this._scroller.render()):null},i.exports=s}),i("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(t,e,i){function s(t){this._items=null,this._size=null,this._outputFunction=s.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new o(this.options),t&&this.setOptions(t)}var o=t("famous/core/OptionsManager"),n=t("famous/core/Transform"),r=t("famous/core/ViewSequence"),a=t("famous/utilities/Utility");s.DEFAULT_OPTIONS={direction:a.Direction.Y,defaultItemSize:[50,50]},s.DEFAULT_OUTPUT_FUNCTION=function(t,e,i){var s=this.options.direction===a.Direction.X?n.translate(e,0):n.translate(0,e);return{transform:s,target:t.render()}},s.prototype.getSize=function(){return this._size||this.render(),this._size},s.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},s.prototype.setOptions=function(t){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},s.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},s.prototype.render=function(){for(var t=0,e=0,i=this.options.direction===a.Direction.X?0:1,s=this.options.direction===a.Direction.X?1:0,o=this._items,n=[];o;){var r,c=o.get();c&&c.getSize&&(r=c.getSize()),r||(r=this.options.defaultItemSize),r[s]!==!0&&(e=Math.max(e,r[s]));var u=this._outputFunction.call(this,c,t,n.length);n.push(u),r[i]&&r[i]!==!0&&(t+=r[i]),o=o.getNext()}return e||(e=void 0),this._size||(this._size=[0,0]),this._size[i]=t,this._size[s]=e,{size:this.getSize(),target:n}},i.exports=s}),i("views/MapCardView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/SequentialLayout"],function(t,e,i){function s(t,e,i){r.apply(this,arguments),this.app=i,this.listScrollview=e,this.map=t,this.surfaces=[],this.sequenceFrom(this.surfaces),o.call(this)}function o(){var t,e=this;t='<div class="list-item">',t+='<div class="list-subject">'+this.map.get("name")+"</div>",t+="</div>";var i=new n({size:[window.innerWidth-16,72],content:t,properties:{background:"white",color:"black",borderRadius:"2px",margin:"0 8px"}});this.map.set("listItem",i),i.map=this.map,i.pipe(this.listScrollview),i.on("click",function(){e.app.menuBarView.titleSurf.setContent(this.map.get("name")),e.app.showTopicList(this.map)}),this.surfaces.push(i),this.surfaces.push(new n({size:[void 0,8]}))}var n=t("famous/core/Surface"),r=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/core/View"),t("famous/views/SequentialLayout"));s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},i.exports=s}),i("views/MapListView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/core/RenderNode","famous/views/Scrollview","views/MapCardView"],function(t,e,i){function s(t){a.apply(this,arguments),this.app=t,o.call(this)}function o(){this.listItems=[new n({size:[void 0,8]})],this.listScrollview=new c({edgeGrip:.05}),this.listScrollview.sequenceFrom(this.listItems);var t=new r;t.sizeFrom(function(){return[window.innerWidth,window.innerHeight-56]}),this._add(t).add(this.listScrollview)}var n=t("famous/core/Surface"),r=t("famous/core/Modifier"),a=(t("famous/core/Transform"),t("famous/core/View")),c=(t("famous/core/RenderNode"),t("famous/views/Scrollview")),u=t("views/MapCardView");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={listItemHeight:72,height:null},s.prototype.addMap=function(t){this.listItems.push(new u(t,this.listScrollview,this.app))},s.prototype.reset=function(){this.listItems=[new n({size:[void 0,8]})],this.listScrollview.sequenceFrom(this.listItems)},s.prototype.removeMap=function(t){var e=t.get("listItem"),i=_.indexOf(this.listItems,e);this.listItems.splice(i,1)},i.exports=s}),i("views/TopicCardView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/SequentialLayout"],function(t,e,i){function s(t,e,i){r.apply(this,arguments),this.app=i,this.listScrollview=e,this.topic=t,this.surfaces=[],this.sequenceFrom(this.surfaces),o.call(this)}function o(){function t(t){var i,s=e.app.metacodes.get(t.get("metacode_id")),o=-1!==s.get("icon").indexOf("http")?s.get("icon"):"content/images"+s.get("icon");return i='<div class="list-item">',i+='<img class="list-icon" width="40" src="'+o+'" />',i+='<div class="list-subject">'+t.get("name")+"</div>",i+='<span class="list-type">'+s.get("name")+"</span>",i+="</div>"}var e=this,i=new n({size:[window.innerWidth-16,72],content:t(this.topic),properties:{background:"white",color:"black",borderRadius:"2px",margin:"0 8px"}});this.topic.set("listItem",this),i.topic=this.topic,i.pipe(this.listScrollview),i.on("click",function(){e.app.showSingleTopic(this.topic)}),this.surfaces.push(i),this.surfaces.push(new n({size:[void 0,8]}))}var n=t("famous/core/Surface"),r=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/core/View"),t("famous/views/SequentialLayout"));s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},i.exports=s}),i("views/TopicListView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/Scrollview","views/TopicCardView"],function(t,e,i){function s(t){a.apply(this,arguments),this.app=t,o.call(this)}function o(){this.listItems=[new n({size:[void 0,8]})],this.listScrollview=new c({edgeGrip:.05}),this.listScrollview.sequenceFrom(this.listItems);var t=new r;t.sizeFrom(function(){return[window.innerWidth,window.innerHeight-56]}),this._add(t).add(this.listScrollview)}var n=t("famous/core/Surface"),r=t("famous/core/Modifier"),a=(t("famous/core/Transform"),t("famous/core/View")),c=t("famous/views/Scrollview"),u=t("views/TopicCardView");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={listItemHeight:72,height:null},s.prototype.reset=function(){this.listItems=[new n({size:[void 0,8]})],this.listScrollview.sequenceFrom(this.listItems)},s.prototype.addTopic=function(t){this.listItems.push(new u(t,this.listScrollview,this.app))},s.prototype.removeTopic=function(t){var e=t.get("listItem"),i=_.indexOf(this.listItems,e);this.listItems.splice(i,1)},i.exports=s}),i("views/TopicView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/surfaces/TextareaSurface","famous/views/Scrollview","views/MenuBarView"],function(t,e,i){function s(t){y.apply(this,arguments),this.app=t,o.call(this),n.call(this),r.call(this),a.call(this),c.call(this),u.call(this),h.call(this),p.call(this),l.call(this),d.call(this)}function o(){this.activeTopic=null}function n(){this.groupMod=new m,this.groupMod.sizeFrom(function(){return[window.innerWidth,window.innerHeight]}),this.groupModAdd=this.add(this.groupMod)}function r(){this.backgroundSurf=new f({properties:{backgroundColor:"white"}}),this.groupModAdd.add(this.backgroundSurf)}function a(){this.menuBarView=new w,this.menuBarView.showBackIcon(),this.menuMod=new m({transform:g.translate(0,0,2)}),this.menuMod.sizeFrom(function(){return[window.innerWidth,56]}),this.groupModAdd.add(this.menuMod).add(this.menuBarView)}function c(){this.topicSurfaces=[],this.listScrollview=new _({edgeGrip:.05}),this.listScrollview.sequenceFrom(this.topicSurfaces),this.backgroundSurf.pipe(this.listScrollview),this.listScrollMod=new m({size:[window.innerWidth,window.innerHeight],transform:g.translate(0,56,0)}),this.groupModAdd.add(this.listScrollMod).add(this.listScrollview)}function u(){this.metacodeSurface=new f({size:[96,96],content:"",properties:{padding:"22px 0"}}),this.metacodeSurface.pipe(this.listScrollview);var t=new y,e=new m({size:[96,140],origin:[.5,0]});t._add(e).add(this.metacodeSurface),this.topicSurfaces.push(t)}function h(){var t=this;this.titleSurface=new v({rows:1,cols:44,name:"textareaSurface",placeholder:"Add a title...",value:"",properties:{padding:"10px 0",border:"0",outline:"0",fontSize:"20px",lineHeight:"22px",resize:"none",textAlign:"center",fontFamily:"robotoregular",color:"#4D4D4D"}}),this.titleSurface.pipe(this.listScrollview),this.currentLineCount=1,this.titleSurface.on("keyup",function(){t.activeTopic.set("title",this.getValue())});var e=new y,i=new m({origin:[.5,0]});i.sizeFrom(function(){return[window.innerWidth-32,40]}),e._add(i).add(this.titleSurface),this.topicSurfaces.push(e)}function p(){this.metadataSurface=new f({size:[void 0,100],content:"",properties:{borderTop:"1px solid #BBB",borderBottom:"1px solid #BBB"}}),this.metadataSurface.pipe(this.listScrollview),
this.topicSurfaces.push(this.metadataSurface)}function l(){var t=this;this.descriptionSurface=new v({name:"textareaSurface",placeholder:"Describe this topic...",value:"",properties:{paddingTop:"10px",border:"0",outline:"0",fontSize:"15px",resize:"none",fontFamily:"robotoregular",color:"#4D4D4D"}}),this.descriptionSurface.pipe(this.listScrollview),this.descriptionSurface.on("keyup",function(){t.activeTopic.set("description",this.getValue())});var e=new y,i=new m({origin:[.5,0]});i.sizeFrom(function(){return[window.innerWidth-32,100]}),e._add(i).add(this.descriptionSurface),this.topicSurfaces.push(e)}function d(){this.menuBarView.on("goBack",this.goBack.bind(this))}var f=t("famous/core/Surface"),m=t("famous/core/Modifier"),g=t("famous/core/Transform"),y=t("famous/core/View"),v=t("famous/surfaces/TextareaSurface"),_=t("famous/views/Scrollview"),w=t("views/MenuBarView");s.prototype=Object.create(y.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.prototype.goBack=function(){this._eventOutput.emit("goBack")},s.prototype.loadTopic=function(t){this.activeTopic=t;var e=this.app.metacodes.get(t.get("metacode_id")),i=-1!==e.get("icon").indexOf("http")?e.get("icon"):"content/images"+e.get("icon");this.menuBarView.titleSurf.setContent(e.get("name")),this.metacodeSurface.setContent('<img width="96" src="'+i+'" />'),this.titleSurface.setValue(t.get("name")),this.metadataSurface.setContent('<div class="topicAuthor"><div class="topicImageWrapper"><img width="30" src="content/images/mapper.png" /></div><div class="topicTextWrapper">Created by:<br>'+t.get("user_id")+'</div></div><div class="topicSynapses"><div class="topicImageWrapper"><img width="30" src="content/images/synapse.png" /></div><div class="topicTextWrapper">Synapses:<br>8</div></div>'),this.descriptionSurface.setValue(t.get("desc"))},i.exports=s}),i("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,e,i){function s(t,e){2===arguments.length?(this._legacyPositionGetter=arguments[0],e=arguments[1]):(this._legacyPositionGetter=null,e=arguments[0]),this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,offsetX:void 0,offsetY:void 0},e?this.setOptions(e):this.setOptions(this.options),this.input=new u,this.output=new u,u.setInputHandler(this,this.input),u.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this.input.on("mousedown",n.bind(this)),this.input.on("mousemove",r.bind(this)),this.input.on("mouseup",a.bind(this)),this.options.propogate?this.input.on("mouseleave",c.bind(this)):this.input.on("mouseleave",a.bind(this))}function o(){var t=this._payload;t.delta=null,t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.offsetX=void 0,t.offsetY=void 0}function n(t){t.preventDefault(),o.call(this);var e=t.clientX,i=t.clientY;this._prevCoord=[e,i],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0];var s=this._payload;s.clientX=e,s.clientY=i,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this.output.emit("start",s)}function r(t){if(this._prevCoord){var e=this._prevCoord,i=this._prevTime,o=t.clientX,n=t.clientY,r=[o,n],a=Date.now(),c=r[0]-e[0],u=r[1]-e[1];this.options.rails&&(Math.abs(c)>Math.abs(u)?u=0:c=0);var h,p,l,d,f=Math.max(a-i,8),m=c/f,g=u/f,y=this.options.scale;this.options.direction===s.DIRECTION_X?(h=this._legacyPositionGetter?this._legacyPositionGetter():0,d=y*c,p=h+d,l=y*m):this.options.direction===s.DIRECTION_Y?(h=this._legacyPositionGetter?this._legacyPositionGetter():0,d=y*u,p=h+d,l=y*g):(h=this._legacyPositionGetter?this._legacyPositionGetter():[0,0],d=[y*c,y*u],p=[h[0]+d[0],h[1]+d[1]],l=[y*m,y*g]);var v=this._payload;v.delta=d,v.position=p,v.velocity=l,v.clientX=o,v.clientY=n,v.offsetX=t.offsetX,v.offsetY=t.offsetY,this.output.emit("update",v),this._prevCoord=r,this._prevTime=a,this._prevVel=l}}function a(t){if(this._prevCoord){var e=this._prevTime,i=Date.now();i-e>this.options.stallTime&&(this._prevVel=void 0===this.options.direction?[0,0]:0);var s=this._payload;s.velocity=this._prevVel,s.clientX=t.clientX,s.clientY=t.clientY,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this.output.emit("end",s),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0}}function c(t){if(this._prevCoord){var e=r.bind(this),i=function(t){a.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",i)}.bind(this);document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}}var u=t("famous/core/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},i.exports=s}),i("famous/math/Utilities",["require","exports","module"],function(t,e,i){var s={};s.clamp=function(t,e){return Math.max(Math.min(t,e[1]),e[0])},s.length=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i]*t[i];return Math.sqrt(e)},i.exports=s}),i("famous/modifiers/Draggable",["require","exports","module","famous/core/Transform","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/GenericSync","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities"],function(t,e,i){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new d([0,0]),this._differential=[0,0],this._active=!0,this.sync=new l(function(){return this._differential}.bind(this),{scale:this.options.scale,syncClasses:[h,p]}),this.eventOutput=new f,f.setInputHandler(this,this.sync),f.setOutputHandler(this,this.eventOutput),c.call(this)}function o(t){var e=this.options,i=e.projection,s=e.snapX,o=e.snapY,n=i&g.x?t[0]:0,r=i&g.y?t[1]:0;return s>0&&(n-=n%s),o>0&&(r-=r%o),[n,r]}function n(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var e=this.options;this._differential=t.position;var i=o.call(this,this._differential);this._differential[0]-=i[0],this._differential[1]-=i[1];var s=this.getPosition();s[0]+=i[0],s[1]+=i[1];var n=[e.xRange[0]+.5*e.snapX,e.xRange[1]-.5*e.snapX],r=[e.yRange[0]+.5*e.snapY,e.yRange[1]-.5*e.snapY];s[0]=y(s[0],n),s[1]=y(s[1],r),this.eventOutput.emit("update",{position:s})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function c(){this.sync.on("start",n.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var u=t("famous/core/Transform"),h=t("famous/inputs/MouseSync"),p=t("famous/inputs/TouchSync"),l=t("famous/inputs/GenericSync"),d=t("famous/transitions/Transitionable"),f=t("famous/core/EventHandler"),m=t("famous/math/Utilities"),g={x:1,y:2},y=m.clamp;s.DEFAULT_OPTIONS={projection:g.x|g.y,scale:1,xRange:[-(1/0),1/0],yRange:[-(1/0),1/0],snapX:0,snapY:0,transition:{duration:0}},s.prototype.setOptions=function(t){var e=this.options;if(void 0!==t.projection){var i=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==i.indexOf(t)&&(e.projection|=g[t])})}void 0!==t.scale&&(e.scale=t.scale),void 0!==t.xRange&&(e.xRange=t.xRange),void 0!==t.yRange&&(e.yRange=t.yRange),void 0!==t.snapX&&(e.snapX=t.snapX),void 0!==t.snapY&&(e.snapY=t.snapY)},s.prototype.getPosition=function(){return this._positionState.get()},s.prototype.setRelativePosition=function(t,e,i){var s=this.getPosition(),o=[s[0]+t[0],s[1]+t[1]];this.setPosition(o,e,i)},s.prototype.setPosition=function(t,e,i){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,e,i)},s.prototype.activate=function(){this._active=!0},s.prototype.deactivate=function(){this._active=!1},s.prototype.toggle=function(){this._active=!this._active},s.prototype.modify=function(t){var e=this.getPosition();return{transform:u.translate(e[0],e[1]),target:t}},i.exports=s}),i("views/PlusView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/modifiers/Draggable"],function(t,e,i){function s(){this.addTopicContent='<img height="56" width="56" src="content/images/MetamapsAddTopic.png"/>',this.plusSurf=new r({size:[56,56],content:this.addTopicContent,properties:{boxShadow:"rgba(0, 0, 0, 0.75) 1px 1px 5px",borderRadius:"28px"}});var t=new a;this.plusSurf.pipe(t),this._add(t).add(this.plusSurf)}function o(){this.plusSurf.on("click",function(){this._eventOutput.emit("openCreateTopic")}.bind(this))}var n=t("famous/core/View"),r=t("famous/core/Surface"),a=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/modifiers/Draggable")),c=function(){n.apply(this,arguments),s.call(this),o.call(this),this.createViewSelected=!1};c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.DEFAULT_OPTIONS={},i.exports=c}),i("views/AppView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/surfaces/ContainerSurface","famous/views/EdgeSwapper","famous/transitions/CachedMap","views/MenuBarView","views/CreateView","views/MapListView","views/TopicListView","views/TopicView","views/PlusView"],function(t,e,i){function s(){v.apply(this,arguments),o.call(this),h.call(this),n.call(this),r.call(this),a.call(this),c.call(this),u.call(this),p.call(this),l.call(this),d.call(this),f.call(this),this.showMapList()}function o(){this.initialized=!1,this.currentPage="",this.activeMap=null}function n(){var t=this;this.Metacode=Backbone.Model.extend({});var e=Backbone.Collection.extend({model:this.Metacode,url:"https://metamaps.cc/metacodes.json"});this.metacodes=new e,this.metacodes.fetch(),this.Topic=Backbone.Model.extend({urlRoot:"/topics",initialize:function(){this.set({user_id:110237153,desc:"",link:"",permission:"commons"})}});var i=Backbone.Collection.extend({model:this.Topic,url:"/topics",comparator:function(t,e){return t=t.get("name").toLowerCase(),e=e.get("name").toLowerCase(),t>e?1:e>t?-1:0},render:function(){_.each(this.models,function(e){t.topicListView.addTopic(e)})}});this.Map=Backbone.Model.extend({urlRoot:"/maps"});var s=Backbone.Collection.extend({model:this.Map,url:"/maps",comparator:function(t,e){return t=t.get("name").toLowerCase(),e=e.get("name").toLowerCase(),t>e?1:e>t?-1:0},render:function(){_.each(this.models,function(e){t.mapListView.addMap(e)})}});this.maps=new s,this.maps.on("reset sort",function(){t.mapListView.reset(),this.render()}),this.maps.on("add",function(e){var s=new i;s.on("reset sort",function(){t.topicListView.reset(),this.render()}),e.set("topics",s)}),this.Mapping=Backbone.Model.extend({urlRoot:"/mappings",initialize:function(){this.set({xloc:0,yloc:0,user_id:110237153,category:"Topic"})}})}function r(){var t=new m({properties:{background:"#EBEBEB"}}),e=new g({size:[void 0,void 0],transform:y.translate(0,0,-1)});this._add(e).add(t)}function a(){this.menuBarView=new S,this.storeTitle="",this.menuMod=new g({size:[void 0,56],transform:y.translate(0,0,2)}),this._add(this.menuMod).add(this.menuBarView)}function c(){this.createView=new M(this),this.createMod=new g({opacity:0,transform:y.translate(0,0,-1)}),this._add(this.createMod).add(this.createView)}function u(){function t(t,e){return y.translate(-this._size[0]*(1-e),0,t*(1-e))}function e(t,e){return y.translate(this._size[0]*(1-e),0,t*(1-e))}this.edgeSwapper=new x({inTransition:{duration:300,easing:"easeIn"},outTransition:{duration:300,easing:"easeOut"},overlap:!0}),this.edgeSwapper._controller.inOpacityFrom(function(t){return 1}),this.edgeSwapper._controller.outOpacityFrom(function(t){return 1}),this.edgeSwapper.goForward=function(){this.edgeSwapper._controller.inTransformFrom(T.create(e.bind(this.edgeSwapper,1e-4))),this.edgeSwapper._controller.outTransformFrom(T.create(t.bind(this.edgeSwapper,1e-4)))},this.edgeSwapper.goBack=function(){this.edgeSwapper._controller.inTransformFrom(T.create(t.bind(this.edgeSwapper,1e-4))),this.edgeSwapper._controller.outTransformFrom(T.create(e.bind(this.edgeSwapper,1e-4)))},this.edgeSwapper.goForward.call(this),this.edgeSwapperMod=new g({transform:y.translate(0,56,1)}),this._add(this.edgeSwapperMod).add(this.edgeSwapper)}function h(){this.mapListContainerView=new w({size:[void 0,void 0],properties:{overflow:"hidden"}}),this.mapListView=new O(this),this.mapListMod=new g,this.mapListContainerView.add(this.mapListMod).add(this.mapListView)}function p(){this.topicListContainerView=new w({size:[void 0,void 0],properties:{overflow:"hidden"}}),this.topicListView=new b(this),this.topicListMod=new g,this.topicListContainerView.add(this.topicListMod).add(this.topicListView)}function l(){this.singleTopicView=new I(this),this.singleTopicMod=new g({size:[0,0],origin:[.5,.5],transform:y.translate(0,0,-2),opacity:0}),this._add(this.singleTopicMod).add(this.singleTopicView)}function d(){this.plusView=new C,this.plusMod=new g({origin:[.5,.95],transform:y.translate(0,0,2)}),this._add(this.plusMod).add(this.plusView)}function f(){this.menuBarView.on("cancelation",this.slideCreateUp.bind(this,function(){this.createView.reset()}.bind(this))),this.menuBarView.on("goBack",this.goBack.bind(this)),this.menuBarView.on("confirmation",this.addTopic.bind(this)),this.createView.on("canCreateTopic",this.menuBarView.enableCreate.bind(this.menuBarView)),this.createView.on("cantCreateTopic",this.menuBarView.disableCreate.bind(this.menuBarView)),this.singleTopicView.on("goBack",this.goBack.bind(this)),this.plusView.on("openCreateTopic",this.slideCreateTopicDown.bind(this))}var m=t("famous/core/Surface"),g=t("famous/core/Modifier"),y=t("famous/core/Transform"),v=t("famous/core/View"),w=t("famous/surfaces/ContainerSurface"),x=t("famous/views/EdgeSwapper"),T=t("famous/transitions/CachedMap"),S=t("views/MenuBarView"),M=t("views/CreateView"),O=t("views/MapListView"),b=t("views/TopicListView"),I=t("views/TopicView"),C=t("views/PlusView");s.prototype=Object.create(v.prototype),s.prototype.constructor=s;var z=window.innerHeight;s.DEFAULT_OPTIONS={transition:{duration:300,curve:"easeInOut"},height:z},s.prototype.getMyMaps=function(){$.ajax({url:"/maps/mine.json",success:function(t){this.maps.add(t),this.maps.sort()}.bind(this)})},s.prototype.goBack=function(){"TopicListPage"===this.currentPage?(this.edgeSwapper.goBack.call(this),this.showMapList()):"TopicPage"===this.currentPage&&this.hideSingleTopic()},s.prototype.showMapList=function(){this.edgeSwapper.show(this.mapListContainerView),this.plusMod.setOpacity(0),this.plusMod.setTransform(y.translate(0,0,-1)),this.menuBarView.hideBackIcon(),this.currentPage="MapListPage",this.menuBarView.titleSurf.setContent("Maps"),this.edgeSwapper.goForward.call(this)},s.prototype.showTopicList=function(t){if(this.topicListView.reset(),t){this.activeMap=t;var e=t.get("topics");0===e.models.length?$.ajax({url:"/maps/"+t.id+"/topics.json",success:function(t){e.add(t),e.sort()}}):e.render()}this.edgeSwapper.show(this.topicListContainerView),this.plusMod.setTransform(y.translate(0,0,2)),this.plusMod.setOpacity(1,this.options.transition),this.menuBarView.showBackIcon(),this.currentPage="TopicListPage"},s.prototype.showSingleTopic=function(t){this.singleTopicMod.setSize([void 0,void 0]),this.singleTopicView.loadTopic(t);var e=y.translate(0,0,2),i=y.scale(.1,.1),s=y.scale(1,1),o=y.multiply(i,e),n=y.multiply(s,e);this.singleTopicMod.setTransform(o),this.singleTopicMod.setTransform(n,{duration:200,curve:"easeIn"}),this.singleTopicMod.setOpacity(1,{duration:200}),this.plusMod.setOpacity(0),this.plusMod.setTransform(y.translate(0,0,-1)),this.currentPage="TopicPage"},s.prototype.hideSingleTopic=function(t){var e=y.scale(.6,.6);this.singleTopicMod.setTransform(e,{duration:200,curve:"easeIn"}),this.singleTopicMod.setOpacity(0,{duration:200},function(){this.singleTopicMod.setTransform(y.translate(0,0,-2)),this.singleTopicMod.setSize([0,0])}.bind(this)),this.plusMod.setTransform(y.translate(0,0,2)),this.plusMod.setOpacity(1,this.options.transition),this.currentPage="TopicListPage"},s.prototype.slideCreateUp=function(t){this.plusMod.setOpacity(1),this.plusMod.setTransform(y.translate(0,0,2)),this.menuBarView.titleSurf.setContent(this.storeTitle),this.edgeSwapperMod.setTransform(y.translate(0,56,0),this.options.transition,t),this.createMod.setOpacity(0,this.options.transition)},s.prototype.slideCreateTopicDown=function(){this.createMod.setOpacity(1),this.edgeSwapperMod.setTransform(y.translate(0,this.options.height,0),this.options.transition),this.plusMod.setOpacity(0),this.plusMod.setTransform(y.translate(0,0,-2)),this.menuBarView.showXIcon(),this.createView.animate(),this.storeTitle=this.menuBarView.titleSurf.getContent(),this.menuBarView.titleSurf.setContent("Add New Topic")},s.prototype.addTopic=function(){var t=this,e={},i=this.metacodes.findWhere({name:this.createView.selectedMetacode});e.name=this.createView.inputValue,e.metacode_id=i.get("id");var s=new this.Topic(e);s.save(null,{success:function(e){var i=new t.Mapping({map_id:t.activeMap.id,topic_id:e.id});i.save(),t.createView.imageInput._currTarget.files[0]&&t.createView.uploadFile(t.createView.imageInput._currTarget.files[0],e.id,"image"),t.createView.audioFile&&t.createView.uploadFile(t.createView.audioFile,e.id,"audio"),t.createView.reset()}});var o=this.activeMap.get("topics");o.add(s),o.sort(),this.slideCreateUp.call(this,function(){this.showSingleTopic(s)}.bind(this))},i.exports=s}),i("famous/surfaces/SubmitInputSurface",["require","exports","module","./InputSurface"],function(t,e,i){function s(t){o.apply(this,arguments),this._type="submit",t&&t.onClick&&this.setOnClick(t.onClick)}var o=t("./InputSurface");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setOnClick=function(t){this.onClick=t},s.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),o.prototype.deploy.apply(this,arguments)},i.exports=s}),i("views/LoginView",["require","exports","module","famous/core/Engine","famous/core/Modifier","famous/core/Transform","famous/core/Surface","famous/core/View","famous/surfaces/ImageSurface","famous/surfaces/InputSurface","famous/surfaces/SubmitInputSurface"],function(t,e,i){"use strict";function s(){c.apply(this,arguments),this.authToken=null,o.call(this),n.call(this)}function o(){var t=new u;t.setContent("content/images/bluebackground.png"),this._add(t);var e=new r({size:[window.innerWidth,window.innerWidth/1.333],origin:[.5,.2]}),i=new u;i.setContent("content/images/collaboration.png"),this._add(e).add(i)}function n(){this.inputsMod=new r({origin:[.5,1],transform:a.translate(0,-16,0)}),this.inputsMod.sizeFrom(function(){return[window.innerWidth-32,182]});var t={borderRadius:"5px",padding:"10px",border:"none",outline:"none",textAlign:"center"};this.inputs={emailInput:new h({placeholder:"Email...",type:"email",properties:t}),passwordInput:new h({placeholder:"Password...",type:"password",properties:t}),submitInput:new p({type:"submit",value:"Login",properties:t})},this.inputs.submitInput.on("click",function(){this.inputs.submitInput.setValue("authenticating..."),this.attemptLogin()}.bind(this));var e=this._add(this.inputsMod);e.add(new r({size:[void 0,50],transform:a.translate(0,0,0)})).add(this.inputs.emailInput),e.add(new r({size:[void 0,50],transform:a.translate(0,66,0)})).add(this.inputs.passwordInput),e.add(new r({size:[void 0,50],transform:a.translate(0,132,0)})).add(this.inputs.submitInput)}var r=(t("famous/core/Engine"),t("famous/core/Modifier")),a=t("famous/core/Transform"),c=(t("famous/core/Surface"),t("famous/core/View")),u=t("famous/surfaces/ImageSurface"),h=t("famous/surfaces/InputSurface"),p=t("famous/surfaces/SubmitInputSurface");s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.prototype.attemptLogin=function(){var t={},e={};t.authenticity_token=this.authToken,e.email=this.inputs.emailInput.getValue(),e.password=this.inputs.passwordInput.getValue(),t.user=e;var i=function(t){t.user?(this.inputs.submitInput.setValue("Success!"),this._eventOutput.emit("signedin")):(this.inputs.submitInput.setValue("Login"),alert("invalid email or password! (this alert is temporary)"))}.bind(this),s=function(t){console.log(t)}.bind(this);$.ajax({url:"/users/login.json",type:"POST",data:t,success:i,error:s})},i.exports=s}),String.prototype.lines=function(){return this.split(/\r*\n/)},String.prototype.lineCount=function(){return this.lines().length},window.onload=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},i("main",["require","exports","module","famous/core/Engine","famous/core/Modifier","famous/core/Transform","famous/core/Surface","famous/core/RenderNode","famous/views/RenderController","views/AppView","views/LoginView"],function(t,e,i){"use strict";function s(){"unauthenticated"!==S.user?(m.getMyMaps(),d.show(m)):(d.show(g),g.authToken=S.token)}var o=t("famous/core/Engine"),n=t("famous/core/Modifier"),r=t("famous/core/Transform"),a=t("famous/core/Surface"),c=t("famous/core/RenderNode"),u=t("famous/views/RenderController"),h=t("views/AppView"),p=t("views/LoginView"),l=o.createContext(),d=new u;l.add(d);var f=navigator.userAgent.toLowerCase();f.indexOf("android")>-1&&l.setPerspective(1e3);var m=new h;l.on("resize",function(){m.options.height=l.getSize()[1]});var g=new p;g.on("signedin",function(){m.getMyMaps(),d.show(m)});var y=new a({size:[96,96],content:'<img src="content/images/map.png" width="96" />',classes:["backfaceVisibility"]}),v=Date.now(),_=new n({origin:[.5,.5],transform:function(){var t=r.rotateZ(.009*(Date.now()-v)),e=r.rotateY(.009*(Date.now()-v)),i=r.rotateY(.009*(Date.now()-v));return r.multiply(t,e,i)}}),w=new c;w.add(_).add(y),d.show(w);var x=!1,T=!1,S=!1,M=(setTimeout(function(){T=!0,x&&s()},2e3),function(t){console.log(t),S=t,x=!0,T&&s()});M({user_id:1,user_name:"Me",user_image:"someavatar"})}),e(["main"])}();